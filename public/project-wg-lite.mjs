let C=typeof Float32Array!="undefined"?Float32Array:Array,j=Math.random;const De=Math.PI/180;function U(e){return e*De}Math.hypot||(Math.hypot=function(){for(var e=0,n=arguments.length;n--;)e+=arguments[n]*arguments[n];return Math.sqrt(e)});function ie(){let e=new C(9);return C!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ue(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[4],e[4]=n[5],e[5]=n[6],e[6]=n[8],e[7]=n[9],e[8]=n[10],e}function Be(e){let n=new C(9);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n}function qe(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e}function je(e,n,r,t,i,l,s,c,a){let f=new C(9);return f[0]=e,f[1]=n,f[2]=r,f[3]=t,f[4]=i,f[5]=l,f[6]=s,f[7]=c,f[8]=a,f}function Xe(e,n,r,t,i,l,s,c,a,f){return e[0]=n,e[1]=r,e[2]=t,e[3]=i,e[4]=l,e[5]=s,e[6]=c,e[7]=a,e[8]=f,e}function ke(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ve(e,n){if(e===n){let r=n[1],t=n[2],i=n[5];e[1]=n[3],e[2]=n[6],e[3]=r,e[5]=n[7],e[6]=t,e[7]=i}else e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8];return e}function Ye(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=n[4],c=n[5],a=n[6],f=n[7],h=n[8],m=h*s-c*f,d=-h*l+c*a,M=f*l-s*a,y=r*m+t*d+i*M;return y?(y=1/y,e[0]=m*y,e[1]=(-h*t+i*f)*y,e[2]=(c*t-i*s)*y,e[3]=d*y,e[4]=(h*r-i*a)*y,e[5]=(-c*r+i*l)*y,e[6]=M*y,e[7]=(-f*r+t*a)*y,e[8]=(s*r-t*l)*y,e):null}function oe(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=n[4],c=n[5],a=n[6],f=n[7],h=n[8];return e[0]=s*h-c*f,e[1]=i*f-t*h,e[2]=t*c-i*s,e[3]=c*a-l*h,e[4]=r*h-i*a,e[5]=i*l-r*c,e[6]=l*f-s*a,e[7]=t*a-r*f,e[8]=r*s-t*l,e}function Ge(e){let n=e[0],r=e[1],t=e[2],i=e[3],l=e[4],s=e[5],c=e[6],a=e[7],f=e[8];return n*(f*l-s*a)+r*(-f*i+s*c)+t*(a*i-l*c)}function le(e,n,r){let t=n[0],i=n[1],l=n[2],s=n[3],c=n[4],a=n[5],f=n[6],h=n[7],m=n[8],d=r[0],M=r[1],y=r[2],p=r[3],x=r[4],w=r[5],$=r[6],z=r[7],E=r[8];return e[0]=d*t+M*s+y*f,e[1]=d*i+M*c+y*h,e[2]=d*l+M*a+y*m,e[3]=p*t+x*s+w*f,e[4]=p*i+x*c+w*h,e[5]=p*l+x*a+w*m,e[6]=$*t+z*s+E*f,e[7]=$*i+z*c+E*h,e[8]=$*l+z*a+E*m,e}function He(e,n,r){let t=n[0],i=n[1],l=n[2],s=n[3],c=n[4],a=n[5],f=n[6],h=n[7],m=n[8],d=r[0],M=r[1];return e[0]=t,e[1]=i,e[2]=l,e[3]=s,e[4]=c,e[5]=a,e[6]=d*t+M*s+f,e[7]=d*i+M*c+h,e[8]=d*l+M*a+m,e}function Qe(e,n,r){let t=n[0],i=n[1],l=n[2],s=n[3],c=n[4],a=n[5],f=n[6],h=n[7],m=n[8],d=Math.sin(r),M=Math.cos(r);return e[0]=M*t+d*s,e[1]=M*i+d*c,e[2]=M*l+d*a,e[3]=M*s-d*t,e[4]=M*c-d*i,e[5]=M*a-d*l,e[6]=f,e[7]=h,e[8]=m,e}function Ze(e,n,r){let t=r[0],i=r[1];return e[0]=t*n[0],e[1]=t*n[1],e[2]=t*n[2],e[3]=i*n[3],e[4]=i*n[4],e[5]=i*n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e}function We(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=n[0],e[7]=n[1],e[8]=1,e}function Je(e,n){let r=Math.sin(n),t=Math.cos(n);return e[0]=t,e[1]=r,e[2]=0,e[3]=-r,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ke(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=n[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ge(e,n){return e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[2],e[4]=n[3],e[5]=0,e[6]=n[4],e[7]=n[5],e[8]=1,e}function ue(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=r+r,c=t+t,a=i+i,f=r*s,h=t*s,m=t*c,d=i*s,M=i*c,y=i*a,p=l*s,x=l*c,w=l*a;return e[0]=1-m-y,e[3]=h-w,e[6]=d+x,e[1]=h+w,e[4]=1-f-y,e[7]=M-p,e[2]=d-x,e[5]=M+p,e[8]=1-f-m,e}function e1(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=n[4],c=n[5],a=n[6],f=n[7],h=n[8],m=n[9],d=n[10],M=n[11],y=n[12],p=n[13],x=n[14],w=n[15],$=r*c-t*s,z=r*a-i*s,E=r*f-l*s,v=t*a-i*c,A=t*f-l*c,R=i*f-l*a,P=h*p-m*y,b=h*x-d*y,L=h*w-M*y,F=m*x-d*p,I=m*w-M*p,O=d*w-M*x,T=$*O-z*I+E*F+v*L-A*b+R*P;return T?(T=1/T,e[0]=(c*O-a*I+f*F)*T,e[1]=(a*L-s*O-f*b)*T,e[2]=(s*I-c*L+f*P)*T,e[3]=(i*I-t*O-l*F)*T,e[4]=(r*O-i*L+l*b)*T,e[5]=(t*L-r*I-l*P)*T,e[6]=(p*R-x*A+w*v)*T,e[7]=(x*E-y*R-w*z)*T,e[8]=(y*A-p*E+w*$)*T,e):null}function n1(e,n,r){return e[0]=2/n,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function r1(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function t1(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function i1(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e[3]=n[3]+r[3],e[4]=n[4]+r[4],e[5]=n[5]+r[5],e[6]=n[6]+r[6],e[7]=n[7]+r[7],e[8]=n[8]+r[8],e}function se(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e[3]=n[3]-r[3],e[4]=n[4]-r[4],e[5]=n[5]-r[5],e[6]=n[6]-r[6],e[7]=n[7]-r[7],e[8]=n[8]-r[8],e}function l1(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=n[7]*r,e[8]=n[8]*r,e}function s1(e,n,r,t){return e[0]=n[0]+r[0]*t,e[1]=n[1]+r[1]*t,e[2]=n[2]+r[2]*t,e[3]=n[3]+r[3]*t,e[4]=n[4]+r[4]*t,e[5]=n[5]+r[5]*t,e[6]=n[6]+r[6]*t,e[7]=n[7]+r[7]*t,e[8]=n[8]+r[8]*t,e}function c1(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]}function a1(e,n){let r=e[0],t=e[1],i=e[2],l=e[3],s=e[4],c=e[5],a=e[6],f=e[7],h=e[8],m=n[0],d=n[1],M=n[2],y=n[3],p=n[4],x=n[5],w=n[6],$=n[7],z=n[8];return Math.abs(r-m)<=1e-6*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(t-d)<=1e-6*Math.max(1,Math.abs(t),Math.abs(d))&&Math.abs(i-M)<=1e-6*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(l-y)<=1e-6*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(s-p)<=1e-6*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-x)<=1e-6*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(a-w)<=1e-6*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(f-$)<=1e-6*Math.max(1,Math.abs(f),Math.abs($))&&Math.abs(h-z)<=1e-6*Math.max(1,Math.abs(h),Math.abs(z))}const f1=le,h1=se,m1=Object.freeze(Object.defineProperty({__proto__:null,add:i1,adjoint:oe,clone:Be,copy:qe,create:ie,determinant:Ge,equals:a1,exactEquals:c1,frob:t1,fromMat2d:ge,fromMat4:Ue,fromQuat:ue,fromRotation:Je,fromScaling:Ke,fromTranslation:We,fromValues:je,identity:ke,invert:Ye,mul:f1,multiply:le,multiplyScalar:l1,multiplyScalarAndAdd:s1,normalFromMat4:e1,projection:n1,rotate:Qe,scale:Ze,set:Xe,str:r1,sub:h1,subtract:se,translate:He,transpose:Ve},Symbol.toStringTag,{value:"Module"}));function K(){let e=new C(16);return C!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function V(e){let n=new C(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function M1(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function d1(e,n,r,t,i,l,s,c,a,f,h,m,d,M,y,p){let x=new C(16);return x[0]=e,x[1]=n,x[2]=r,x[3]=t,x[4]=i,x[5]=l,x[6]=s,x[7]=c,x[8]=a,x[9]=f,x[10]=h,x[11]=m,x[12]=d,x[13]=M,x[14]=y,x[15]=p,x}function x1(e,n,r,t,i,l,s,c,a,f,h,m,d,M,y,p,x){return e[0]=n,e[1]=r,e[2]=t,e[3]=i,e[4]=l,e[5]=s,e[6]=c,e[7]=a,e[8]=f,e[9]=h,e[10]=m,e[11]=d,e[12]=M,e[13]=y,e[14]=p,e[15]=x,e}function ce(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y1(e,n){if(e===n){let r=n[1],t=n[2],i=n[3],l=n[6],s=n[7],c=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=r,e[6]=n[9],e[7]=n[13],e[8]=t,e[9]=l,e[11]=n[14],e[12]=i,e[13]=s,e[14]=c}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}function p1(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=n[4],c=n[5],a=n[6],f=n[7],h=n[8],m=n[9],d=n[10],M=n[11],y=n[12],p=n[13],x=n[14],w=n[15],$=r*c-t*s,z=r*a-i*s,E=r*f-l*s,v=t*a-i*c,A=t*f-l*c,R=i*f-l*a,P=h*p-m*y,b=h*x-d*y,L=h*w-M*y,F=m*x-d*p,I=m*w-M*p,O=d*w-M*x,T=$*O-z*I+E*F+v*L-A*b+R*P;return T?(T=1/T,e[0]=(c*O-a*I+f*F)*T,e[1]=(i*I-t*O-l*F)*T,e[2]=(p*R-x*A+w*v)*T,e[3]=(d*A-m*R-M*v)*T,e[4]=(a*L-s*O-f*b)*T,e[5]=(r*O-i*L+l*b)*T,e[6]=(x*E-y*R-w*z)*T,e[7]=(h*R-d*E+M*z)*T,e[8]=(s*I-c*L+f*P)*T,e[9]=(t*L-r*I-l*P)*T,e[10]=(y*A-p*E+w*$)*T,e[11]=(m*E-h*A-M*$)*T,e[12]=(c*b-s*F-a*P)*T,e[13]=(r*F-t*b+i*P)*T,e[14]=(p*z-y*v-x*$)*T,e[15]=(h*v-m*z+d*$)*T,e):null}function S1(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=n[4],c=n[5],a=n[6],f=n[7],h=n[8],m=n[9],d=n[10],M=n[11],y=n[12],p=n[13],x=n[14],w=n[15],$=r*c-t*s,z=r*a-i*s,E=r*f-l*s,v=t*a-i*c,A=t*f-l*c,R=i*f-l*a,P=h*p-m*y,b=h*x-d*y,L=h*w-M*y,F=m*x-d*p,I=m*w-M*p,O=d*w-M*x;return e[0]=c*O-a*I+f*F,e[1]=i*I-t*O-l*F,e[2]=p*R-x*A+w*v,e[3]=d*A-m*R-M*v,e[4]=a*L-s*O-f*b,e[5]=r*O-i*L+l*b,e[6]=x*E-y*R-w*z,e[7]=h*R-d*E+M*z,e[8]=s*I-c*L+f*P,e[9]=t*L-r*I-l*P,e[10]=y*A-p*E+w*$,e[11]=m*E-h*A-M*$,e[12]=c*b-s*F-a*P,e[13]=r*F-t*b+i*P,e[14]=p*z-y*v-x*$,e[15]=h*v-m*z+d*$,e}function w1(e){let n=e[0],r=e[1],t=e[2],i=e[3],l=e[4],s=e[5],c=e[6],a=e[7],f=e[8],h=e[9],m=e[10],d=e[11],M=e[12],y=e[13],p=e[14],x=e[15],w=n*s-r*l,$=n*c-t*l,z=r*c-t*s,E=f*y-h*M,v=f*p-m*M,A=h*p-m*y,R=n*A-r*v+t*E,P=l*A-s*v+c*E,b=f*z-h*$+m*w,L=M*z-y*$+p*w;return a*R-i*P+x*b-d*L}function ae(e,n,r){let t=n[0],i=n[1],l=n[2],s=n[3],c=n[4],a=n[5],f=n[6],h=n[7],m=n[8],d=n[9],M=n[10],y=n[11],p=n[12],x=n[13],w=n[14],$=n[15],z=r[0],E=r[1],v=r[2],A=r[3];return e[0]=z*t+E*c+v*m+A*p,e[1]=z*i+E*a+v*d+A*x,e[2]=z*l+E*f+v*M+A*w,e[3]=z*s+E*h+v*y+A*$,z=r[4],E=r[5],v=r[6],A=r[7],e[4]=z*t+E*c+v*m+A*p,e[5]=z*i+E*a+v*d+A*x,e[6]=z*l+E*f+v*M+A*w,e[7]=z*s+E*h+v*y+A*$,z=r[8],E=r[9],v=r[10],A=r[11],e[8]=z*t+E*c+v*m+A*p,e[9]=z*i+E*a+v*d+A*x,e[10]=z*l+E*f+v*M+A*w,e[11]=z*s+E*h+v*y+A*$,z=r[12],E=r[13],v=r[14],A=r[15],e[12]=z*t+E*c+v*m+A*p,e[13]=z*i+E*a+v*d+A*x,e[14]=z*l+E*f+v*M+A*w,e[15]=z*s+E*h+v*y+A*$,e}function D(e,n,r){let t=r[0],i=r[1],l=r[2],s,c,a,f,h,m,d,M,y,p,x,w;return n===e?(e[12]=n[0]*t+n[4]*i+n[8]*l+n[12],e[13]=n[1]*t+n[5]*i+n[9]*l+n[13],e[14]=n[2]*t+n[6]*i+n[10]*l+n[14],e[15]=n[3]*t+n[7]*i+n[11]*l+n[15]):(s=n[0],c=n[1],a=n[2],f=n[3],h=n[4],m=n[5],d=n[6],M=n[7],y=n[8],p=n[9],x=n[10],w=n[11],e[0]=s,e[1]=c,e[2]=a,e[3]=f,e[4]=h,e[5]=m,e[6]=d,e[7]=M,e[8]=y,e[9]=p,e[10]=x,e[11]=w,e[12]=s*t+h*i+y*l+n[12],e[13]=c*t+m*i+p*l+n[13],e[14]=a*t+d*i+x*l+n[14],e[15]=f*t+M*i+w*l+n[15]),e}function g(e,n,r){let t=r[0],i=r[1],l=r[2];return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=n[7]*i,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=n[11]*l,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function E1(e,n,r,t){let i=t[0],l=t[1],s=t[2],c=Math.hypot(i,l,s),a,f,h,m,d,M,y,p,x,w,$,z,E,v,A,R,P,b,L,F,I,O,T,B;return c<1e-6?null:(c=1/c,i*=c,l*=c,s*=c,a=Math.sin(r),f=Math.cos(r),h=1-f,m=n[0],d=n[1],M=n[2],y=n[3],p=n[4],x=n[5],w=n[6],$=n[7],z=n[8],E=n[9],v=n[10],A=n[11],R=i*i*h+f,P=l*i*h+s*a,b=s*i*h-l*a,L=i*l*h-s*a,F=l*l*h+f,I=s*l*h+i*a,O=i*s*h+l*a,T=l*s*h-i*a,B=s*s*h+f,e[0]=m*R+p*P+z*b,e[1]=d*R+x*P+E*b,e[2]=M*R+w*P+v*b,e[3]=y*R+$*P+A*b,e[4]=m*L+p*F+z*I,e[5]=d*L+x*F+E*I,e[6]=M*L+w*F+v*I,e[7]=y*L+$*F+A*I,e[8]=m*O+p*T+z*B,e[9]=d*O+x*T+E*B,e[10]=M*O+w*T+v*B,e[11]=y*O+$*T+A*B,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}function G(e,n,r){let t=Math.sin(r),i=Math.cos(r),l=n[4],s=n[5],c=n[6],a=n[7],f=n[8],h=n[9],m=n[10],d=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=l*i+f*t,e[5]=s*i+h*t,e[6]=c*i+m*t,e[7]=a*i+d*t,e[8]=f*i-l*t,e[9]=h*i-s*t,e[10]=m*i-c*t,e[11]=d*i-a*t,e}function W(e,n,r){let t=Math.sin(r),i=Math.cos(r),l=n[0],s=n[1],c=n[2],a=n[3],f=n[8],h=n[9],m=n[10],d=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=l*i-f*t,e[1]=s*i-h*t,e[2]=c*i-m*t,e[3]=a*i-d*t,e[8]=l*t+f*i,e[9]=s*t+h*i,e[10]=c*t+m*i,e[11]=a*t+d*i,e}function q(e,n,r){let t=Math.sin(r),i=Math.cos(r),l=n[0],s=n[1],c=n[2],a=n[3],f=n[4],h=n[5],m=n[6],d=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=l*i+f*t,e[1]=s*i+h*t,e[2]=c*i+m*t,e[3]=a*i+d*t,e[4]=f*i-l*t,e[5]=h*i-s*t,e[6]=m*i-c*t,e[7]=d*i-a*t,e}function z1(e,n){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function A1(e,n){return e[0]=n[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v1(e,n,r){let t=r[0],i=r[1],l=r[2],s=Math.hypot(t,i,l),c,a,f;return s<1e-6?null:(s=1/s,t*=s,i*=s,l*=s,c=Math.sin(n),a=Math.cos(n),f=1-a,e[0]=t*t*f+a,e[1]=i*t*f+l*c,e[2]=l*t*f-i*c,e[3]=0,e[4]=t*i*f-l*c,e[5]=i*i*f+a,e[6]=l*i*f+t*c,e[7]=0,e[8]=t*l*f+i*c,e[9]=i*l*f-t*c,e[10]=l*l*f+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function P1(e,n){let r=Math.sin(n),t=Math.cos(n);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $1(e,n){let r=Math.sin(n),t=Math.cos(n);return e[0]=t,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L1(e,n){let r=Math.sin(n),t=Math.cos(n);return e[0]=t,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fe(e,n,r){let t=n[0],i=n[1],l=n[2],s=n[3],c=t+t,a=i+i,f=l+l,h=t*c,m=t*a,d=t*f,M=i*a,y=i*f,p=l*f,x=s*c,w=s*a,$=s*f;return e[0]=1-(M+p),e[1]=m+$,e[2]=d-w,e[3]=0,e[4]=m-$,e[5]=1-(h+p),e[6]=y+x,e[7]=0,e[8]=d+w,e[9]=y-x,e[10]=1-(h+M),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function T1(e,n){let r=new C(3),t=-n[0],i=-n[1],l=-n[2],s=n[3],c=n[4],a=n[5],f=n[6],h=n[7],m=t*t+i*i+l*l+s*s;return m>0?(r[0]=(c*s+h*t+a*l-f*i)*2/m,r[1]=(a*s+h*i+f*t-c*l)*2/m,r[2]=(f*s+h*l+c*i-a*t)*2/m):(r[0]=(c*s+h*t+a*l-f*i)*2,r[1]=(a*s+h*i+f*t-c*l)*2,r[2]=(f*s+h*l+c*i-a*t)*2),fe(e,n,r),e}function R1(e,n){return e[0]=n[12],e[1]=n[13],e[2]=n[14],e}function he(e,n){let r=n[0],t=n[1],i=n[2],l=n[4],s=n[5],c=n[6],a=n[8],f=n[9],h=n[10];return e[0]=Math.hypot(r,t,i),e[1]=Math.hypot(l,s,c),e[2]=Math.hypot(a,f,h),e}function b1(e,n){let r=new C(3);he(r,n);let t=1/r[0],i=1/r[1],l=1/r[2],s=n[0]*t,c=n[1]*i,a=n[2]*l,f=n[4]*t,h=n[5]*i,m=n[6]*l,d=n[8]*t,M=n[9]*i,y=n[10]*l,p=s+h+y,x=0;return p>0?(x=Math.sqrt(p+1)*2,e[3]=.25*x,e[0]=(m-M)/x,e[1]=(d-a)/x,e[2]=(c-f)/x):s>h&&s>y?(x=Math.sqrt(1+s-h-y)*2,e[3]=(m-M)/x,e[0]=.25*x,e[1]=(c+f)/x,e[2]=(d+a)/x):h>y?(x=Math.sqrt(1+h-s-y)*2,e[3]=(d-a)/x,e[0]=(c+f)/x,e[1]=.25*x,e[2]=(m+M)/x):(x=Math.sqrt(1+y-s-h)*2,e[3]=(c-f)/x,e[0]=(d+a)/x,e[1]=(m+M)/x,e[2]=.25*x),e}function I1(e,n,r,t){n[0]=t[12],n[1]=t[13],n[2]=t[14];let i=t[0],l=t[1],s=t[2],c=t[4],a=t[5],f=t[6],h=t[8],m=t[9],d=t[10];r[0]=Math.hypot(i,l,s),r[1]=Math.hypot(c,a,f),r[2]=Math.hypot(h,m,d);let M=1/r[0],y=1/r[1],p=1/r[2],x=i*M,w=l*y,$=s*p,z=c*M,E=a*y,v=f*p,A=h*M,R=m*y,P=d*p,b=x+E+P,L=0;return b>0?(L=Math.sqrt(b+1)*2,e[3]=.25*L,e[0]=(v-R)/L,e[1]=(A-$)/L,e[2]=(w-z)/L):x>E&&x>P?(L=Math.sqrt(1+x-E-P)*2,e[3]=(v-R)/L,e[0]=.25*L,e[1]=(w+z)/L,e[2]=(A+$)/L):E>P?(L=Math.sqrt(1+E-x-P)*2,e[3]=(A-$)/L,e[0]=(w+z)/L,e[1]=.25*L,e[2]=(v+R)/L):(L=Math.sqrt(1+P-x-E)*2,e[3]=(w-z)/L,e[0]=(A+$)/L,e[1]=(v+R)/L,e[2]=.25*L),e}function O1(e,n,r,t){let i=n[0],l=n[1],s=n[2],c=n[3],a=i+i,f=l+l,h=s+s,m=i*a,d=i*f,M=i*h,y=l*f,p=l*h,x=s*h,w=c*a,$=c*f,z=c*h,E=t[0],v=t[1],A=t[2];return e[0]=(1-(y+x))*E,e[1]=(d+z)*E,e[2]=(M-$)*E,e[3]=0,e[4]=(d-z)*v,e[5]=(1-(m+x))*v,e[6]=(p+w)*v,e[7]=0,e[8]=(M+$)*A,e[9]=(p-w)*A,e[10]=(1-(m+y))*A,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function F1(e,n,r,t,i){let l=n[0],s=n[1],c=n[2],a=n[3],f=l+l,h=s+s,m=c+c,d=l*f,M=l*h,y=l*m,p=s*h,x=s*m,w=c*m,$=a*f,z=a*h,E=a*m,v=t[0],A=t[1],R=t[2],P=i[0],b=i[1],L=i[2],F=(1-(p+w))*v,I=(M+E)*v,O=(y-z)*v,T=(M-E)*A,B=(1-(d+w))*A,X=(x+$)*A,k=(y+z)*R,ee=(x-$)*R,ne=(1-(d+p))*R;return e[0]=F,e[1]=I,e[2]=O,e[3]=0,e[4]=T,e[5]=B,e[6]=X,e[7]=0,e[8]=k,e[9]=ee,e[10]=ne,e[11]=0,e[12]=r[0]+P-(F*P+T*b+k*L),e[13]=r[1]+b-(I*P+B*b+ee*L),e[14]=r[2]+L-(O*P+X*b+ne*L),e[15]=1,e}function N1(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=r+r,c=t+t,a=i+i,f=r*s,h=t*s,m=t*c,d=i*s,M=i*c,y=i*a,p=l*s,x=l*c,w=l*a;return e[0]=1-m-y,e[1]=h+w,e[2]=d-x,e[3]=0,e[4]=h-w,e[5]=1-f-y,e[6]=M+p,e[7]=0,e[8]=d+x,e[9]=M-p,e[10]=1-f-m,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function C1(e,n,r,t,i,l,s){let c=1/(r-n),a=1/(i-t),f=1/(l-s);return e[0]=l*2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l*2*a,e[6]=0,e[7]=0,e[8]=(r+n)*c,e[9]=(i+t)*a,e[10]=(s+l)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*l*2*f,e[15]=0,e}function me(e,n,r,t,i){const l=1/Math.tan(n/2);if(e[0]=l/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){const s=1/(t-i);e[10]=(i+t)*s,e[14]=2*i*t*s}else e[10]=-1,e[14]=-2*t;return e}const Me=me;function _1(e,n,r,t,i){const l=1/Math.tan(n/2);if(e[0]=l/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){const s=1/(t-i);e[10]=i*s,e[14]=i*t*s}else e[10]=-1,e[14]=-t;return e}function D1(e,n,r,t){let i=Math.tan(n.upDegrees*Math.PI/180),l=Math.tan(n.downDegrees*Math.PI/180),s=Math.tan(n.leftDegrees*Math.PI/180),c=Math.tan(n.rightDegrees*Math.PI/180),a=2/(s+c),f=2/(i+l);return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-((s-c)*a*.5),e[9]=(i-l)*f*.5,e[10]=t/(r-t),e[11]=-1,e[12]=0,e[13]=0,e[14]=t*r/(r-t),e[15]=0,e}function de(e,n,r,t,i,l,s){const c=1/(n-r),a=1/(t-i),f=1/(l-s);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(n+r)*c,e[13]=(i+t)*a,e[14]=(s+l)*f,e[15]=1,e}const U1=de;function B1(e,n,r,t,i,l,s){const c=1/(n-r),a=1/(t-i),f=1/(l-s);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=f,e[11]=0,e[12]=(n+r)*c,e[13]=(i+t)*a,e[14]=l*f,e[15]=1,e}function q1(e,n,r,t){let i,l,s,c,a,f,h,m,d,M,y=n[0],p=n[1],x=n[2],w=t[0],$=t[1],z=t[2],E=r[0],v=r[1],A=r[2];return Math.abs(y-E)<1e-6&&Math.abs(p-v)<1e-6&&Math.abs(x-A)<1e-6?ce(e):(h=y-E,m=p-v,d=x-A,M=1/Math.hypot(h,m,d),h*=M,m*=M,d*=M,i=$*d-z*m,l=z*h-w*d,s=w*m-$*h,M=Math.hypot(i,l,s),M?(M=1/M,i*=M,l*=M,s*=M):(i=0,l=0,s=0),c=m*s-d*l,a=d*i-h*s,f=h*l-m*i,M=Math.hypot(c,a,f),M?(M=1/M,c*=M,a*=M,f*=M):(c=0,a=0,f=0),e[0]=i,e[1]=c,e[2]=h,e[3]=0,e[4]=l,e[5]=a,e[6]=m,e[7]=0,e[8]=s,e[9]=f,e[10]=d,e[11]=0,e[12]=-(i*y+l*p+s*x),e[13]=-(c*y+a*p+f*x),e[14]=-(h*y+m*p+d*x),e[15]=1,e)}function j1(e,n,r,t){let i=n[0],l=n[1],s=n[2],c=t[0],a=t[1],f=t[2],h=i-r[0],m=l-r[1],d=s-r[2],M=h*h+m*m+d*d;M>0&&(M=1/Math.sqrt(M),h*=M,m*=M,d*=M);let y=a*d-f*m,p=f*h-c*d,x=c*m-a*h;return M=y*y+p*p+x*x,M>0&&(M=1/Math.sqrt(M),y*=M,p*=M,x*=M),e[0]=y,e[1]=p,e[2]=x,e[3]=0,e[4]=m*x-d*p,e[5]=d*y-h*x,e[6]=h*p-m*y,e[7]=0,e[8]=h,e[9]=m,e[10]=d,e[11]=0,e[12]=i,e[13]=l,e[14]=s,e[15]=1,e}function X1(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function k1(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function V1(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e[3]=n[3]+r[3],e[4]=n[4]+r[4],e[5]=n[5]+r[5],e[6]=n[6]+r[6],e[7]=n[7]+r[7],e[8]=n[8]+r[8],e[9]=n[9]+r[9],e[10]=n[10]+r[10],e[11]=n[11]+r[11],e[12]=n[12]+r[12],e[13]=n[13]+r[13],e[14]=n[14]+r[14],e[15]=n[15]+r[15],e}function xe(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e[3]=n[3]-r[3],e[4]=n[4]-r[4],e[5]=n[5]-r[5],e[6]=n[6]-r[6],e[7]=n[7]-r[7],e[8]=n[8]-r[8],e[9]=n[9]-r[9],e[10]=n[10]-r[10],e[11]=n[11]-r[11],e[12]=n[12]-r[12],e[13]=n[13]-r[13],e[14]=n[14]-r[14],e[15]=n[15]-r[15],e}function Y1(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=n[7]*r,e[8]=n[8]*r,e[9]=n[9]*r,e[10]=n[10]*r,e[11]=n[11]*r,e[12]=n[12]*r,e[13]=n[13]*r,e[14]=n[14]*r,e[15]=n[15]*r,e}function o1(e,n,r,t){return e[0]=n[0]+r[0]*t,e[1]=n[1]+r[1]*t,e[2]=n[2]+r[2]*t,e[3]=n[3]+r[3]*t,e[4]=n[4]+r[4]*t,e[5]=n[5]+r[5]*t,e[6]=n[6]+r[6]*t,e[7]=n[7]+r[7]*t,e[8]=n[8]+r[8]*t,e[9]=n[9]+r[9]*t,e[10]=n[10]+r[10]*t,e[11]=n[11]+r[11]*t,e[12]=n[12]+r[12]*t,e[13]=n[13]+r[13]*t,e[14]=n[14]+r[14]*t,e[15]=n[15]+r[15]*t,e}function G1(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]&&e[4]===n[4]&&e[5]===n[5]&&e[6]===n[6]&&e[7]===n[7]&&e[8]===n[8]&&e[9]===n[9]&&e[10]===n[10]&&e[11]===n[11]&&e[12]===n[12]&&e[13]===n[13]&&e[14]===n[14]&&e[15]===n[15]}function H1(e,n){let r=e[0],t=e[1],i=e[2],l=e[3],s=e[4],c=e[5],a=e[6],f=e[7],h=e[8],m=e[9],d=e[10],M=e[11],y=e[12],p=e[13],x=e[14],w=e[15],$=n[0],z=n[1],E=n[2],v=n[3],A=n[4],R=n[5],P=n[6],b=n[7],L=n[8],F=n[9],I=n[10],O=n[11],T=n[12],B=n[13],X=n[14],k=n[15];return Math.abs(r-$)<=1e-6*Math.max(1,Math.abs(r),Math.abs($))&&Math.abs(t-z)<=1e-6*Math.max(1,Math.abs(t),Math.abs(z))&&Math.abs(i-E)<=1e-6*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(l-v)<=1e-6*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(s-A)<=1e-6*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(c-R)<=1e-6*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(a-P)<=1e-6*Math.max(1,Math.abs(a),Math.abs(P))&&Math.abs(f-b)<=1e-6*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(h-L)<=1e-6*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(m-F)<=1e-6*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(d-I)<=1e-6*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(M-O)<=1e-6*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(y-T)<=1e-6*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(p-B)<=1e-6*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(x-X)<=1e-6*Math.max(1,Math.abs(x),Math.abs(X))&&Math.abs(w-k)<=1e-6*Math.max(1,Math.abs(w),Math.abs(k))}const Q1=ae,Z1=xe,W1=Object.freeze(Object.defineProperty({__proto__:null,add:V1,adjoint:S1,clone:V,copy:M1,create:K,decompose:I1,determinant:w1,equals:H1,exactEquals:G1,frob:k1,fromQuat:N1,fromQuat2:T1,fromRotation:v1,fromRotationTranslation:fe,fromRotationTranslationScale:O1,fromRotationTranslationScaleOrigin:F1,fromScaling:A1,fromTranslation:z1,fromValues:d1,fromXRotation:P1,fromYRotation:$1,fromZRotation:L1,frustum:C1,getRotation:b1,getScaling:he,getTranslation:R1,identity:ce,invert:p1,lookAt:q1,mul:Q1,multiply:ae,multiplyScalar:Y1,multiplyScalarAndAdd:o1,ortho:U1,orthoNO:de,orthoZO:B1,perspective:Me,perspectiveFromFieldOfView:D1,perspectiveNO:me,perspectiveZO:_1,rotate:E1,rotateX:G,rotateY:W,rotateZ:q,scale:g,set:x1,str:X1,sub:Z1,subtract:xe,targetTo:j1,translate:D,transpose:y1},Symbol.toStringTag,{value:"Module"}));function u(){let e=new C(3);return C!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function J1(e){var n=new C(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function ye(e){let n=e[0],r=e[1],t=e[2];return Math.hypot(n,r,t)}function J(e,n,r){let t=new C(3);return t[0]=e,t[1]=n,t[2]=r,t}function K1(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function g1(e,n,r,t){return e[0]=n,e[1]=r,e[2]=t,e}function u1(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function pe(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e}function Se(e,n,r){return e[0]=n[0]*r[0],e[1]=n[1]*r[1],e[2]=n[2]*r[2],e}function we(e,n,r){return e[0]=n[0]/r[0],e[1]=n[1]/r[1],e[2]=n[2]/r[2],e}function en(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e}function nn(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e}function rn(e,n,r){return e[0]=Math.min(n[0],r[0]),e[1]=Math.min(n[1],r[1]),e[2]=Math.min(n[2],r[2]),e}function tn(e,n,r){return e[0]=Math.max(n[0],r[0]),e[1]=Math.max(n[1],r[1]),e[2]=Math.max(n[2],r[2]),e}function ln(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e}function sn(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e}function cn(e,n,r,t){return e[0]=n[0]+r[0]*t,e[1]=n[1]+r[1]*t,e[2]=n[2]+r[2]*t,e}function Ee(e,n){let r=n[0]-e[0],t=n[1]-e[1],i=n[2]-e[2];return Math.hypot(r,t,i)}function ze(e,n){let r=n[0]-e[0],t=n[1]-e[1],i=n[2]-e[2];return r*r+t*t+i*i}function Ae(e){let n=e[0],r=e[1],t=e[2];return n*n+r*r+t*t}function an(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e}function fn(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e}function ve(e,n){let r=n[0],t=n[1],i=n[2],l=r*r+t*t+i*i;return l>0&&(l=1/Math.sqrt(l)),e[0]=n[0]*l,e[1]=n[1]*l,e[2]=n[2]*l,e}function H(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}function o(e,n,r){let t=n[0],i=n[1],l=n[2],s=r[0],c=r[1],a=r[2];return e[0]=i*a-l*c,e[1]=l*s-t*a,e[2]=t*c-i*s,e}function hn(e,n,r,t){let i=n[0],l=n[1],s=n[2];return e[0]=i+t*(r[0]-i),e[1]=l+t*(r[1]-l),e[2]=s+t*(r[2]-s),e}function mn(e,n,r,t){let i=Math.acos(Math.min(Math.max(H(n,r),-1),1)),l=Math.sin(i),s=Math.sin((1-t)*i)/l,c=Math.sin(t*i)/l;return e[0]=s*n[0]+c*r[0],e[1]=s*n[1]+c*r[1],e[2]=s*n[2]+c*r[2],e}function Mn(e,n,r,t,i,l){let s=l*l,c=s*(2*l-3)+1,a=s*(l-2)+l,f=s*(l-1),h=s*(3-2*l);return e[0]=n[0]*c+r[0]*a+t[0]*f+i[0]*h,e[1]=n[1]*c+r[1]*a+t[1]*f+i[1]*h,e[2]=n[2]*c+r[2]*a+t[2]*f+i[2]*h,e}function dn(e,n,r,t,i,l){let s=1-l,c=s*s,a=l*l,f=c*s,h=3*l*c,m=3*a*s,d=a*l;return e[0]=n[0]*f+r[0]*h+t[0]*m+i[0]*d,e[1]=n[1]*f+r[1]*h+t[1]*m+i[1]*d,e[2]=n[2]*f+r[2]*h+t[2]*m+i[2]*d,e}function xn(e,n){n=n||1;let r=j()*2*Math.PI,t=j()*2-1,i=Math.sqrt(1-t*t)*n;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=t*n,e}function yn(e,n,r){let t=n[0],i=n[1],l=n[2],s=r[3]*t+r[7]*i+r[11]*l+r[15];return s=s||1,e[0]=(r[0]*t+r[4]*i+r[8]*l+r[12])/s,e[1]=(r[1]*t+r[5]*i+r[9]*l+r[13])/s,e[2]=(r[2]*t+r[6]*i+r[10]*l+r[14])/s,e}function pn(e,n,r){let t=n[0],i=n[1],l=n[2];return e[0]=t*r[0]+i*r[3]+l*r[6],e[1]=t*r[1]+i*r[4]+l*r[7],e[2]=t*r[2]+i*r[5]+l*r[8],e}function Sn(e,n,r){let t=r[0],i=r[1],l=r[2],s=r[3],c=n[0],a=n[1],f=n[2],h=i*f-l*a,m=l*c-t*f,d=t*a-i*c,M=i*d-l*m,y=l*h-t*d,p=t*m-i*h,x=s*2;return h*=x,m*=x,d*=x,M*=2,y*=2,p*=2,e[0]=c+h+M,e[1]=a+m+y,e[2]=f+d+p,e}function wn(e,n,r,t){let i=[],l=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],l[0]=i[0],l[1]=i[1]*Math.cos(t)-i[2]*Math.sin(t),l[2]=i[1]*Math.sin(t)+i[2]*Math.cos(t),e[0]=l[0]+r[0],e[1]=l[1]+r[1],e[2]=l[2]+r[2],e}function En(e,n,r,t){let i=[],l=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],l[0]=i[2]*Math.sin(t)+i[0]*Math.cos(t),l[1]=i[1],l[2]=i[2]*Math.cos(t)-i[0]*Math.sin(t),e[0]=l[0]+r[0],e[1]=l[1]+r[1],e[2]=l[2]+r[2],e}function zn(e,n,r,t){let i=[],l=[];return i[0]=n[0]-r[0],i[1]=n[1]-r[1],i[2]=n[2]-r[2],l[0]=i[0]*Math.cos(t)-i[1]*Math.sin(t),l[1]=i[0]*Math.sin(t)+i[1]*Math.cos(t),l[2]=i[2],e[0]=l[0]+r[0],e[1]=l[1]+r[1],e[2]=l[2]+r[2],e}function An(e,n){let r=e[0],t=e[1],i=e[2],l=n[0],s=n[1],c=n[2],a=Math.sqrt((r*r+t*t+i*i)*(l*l+s*s+c*c)),f=a&&H(e,n)/a;return Math.acos(Math.min(Math.max(f,-1),1))}function vn(e){return e[0]=0,e[1]=0,e[2]=0,e}function Pn(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function $n(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function Ln(e,n){let r=e[0],t=e[1],i=e[2],l=n[0],s=n[1],c=n[2];return Math.abs(r-l)<=1e-6*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(t-s)<=1e-6*Math.max(1,Math.abs(t),Math.abs(s))&&Math.abs(i-c)<=1e-6*Math.max(1,Math.abs(i),Math.abs(c))}const Tn=pe,Rn=Se,bn=we,In=Ee,On=ze,Pe=ye,Fn=Ae,Nn=function(){let e=u();return function(n,r,t,i,l,s){let c,a;for(r||(r=3),t||(t=0),i?a=Math.min(i*r+t,n.length):a=n.length,c=t;c<a;c+=r)e[0]=n[c],e[1]=n[c+1],e[2]=n[c+2],l(e,e,s),n[c]=e[0],n[c+1]=e[1],n[c+2]=e[2];return n}}(),Cn=Object.freeze(Object.defineProperty({__proto__:null,add:u1,angle:An,bezier:dn,ceil:en,clone:J1,copy:K1,create:u,cross:o,dist:In,distance:Ee,div:bn,divide:we,dot:H,equals:Ln,exactEquals:$n,floor:nn,forEach:Nn,fromValues:J,hermite:Mn,inverse:fn,len:Pe,length:ye,lerp:hn,max:tn,min:rn,mul:Rn,multiply:Se,negate:an,normalize:ve,random:xn,rotateX:wn,rotateY:En,rotateZ:zn,round:ln,scale:sn,scaleAndAdd:cn,set:g1,slerp:mn,sqrDist:On,sqrLen:Fn,squaredDistance:ze,squaredLength:Ae,str:Pn,sub:Tn,subtract:pe,transformMat3:pn,transformMat4:yn,transformQuat:Sn,zero:vn},Symbol.toStringTag,{value:"Module"}));function $e(){let e=new C(4);return C!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function _n(e){let n=new C(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function Dn(e,n,r,t){let i=new C(4);return i[0]=e,i[1]=n,i[2]=r,i[3]=t,i}function Un(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}function Bn(e,n,r,t,i){return e[0]=n,e[1]=r,e[2]=t,e[3]=i,e}function qn(e,n,r){return e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e[3]=n[3]+r[3],e}function Le(e,n,r){return e[0]=n[0]-r[0],e[1]=n[1]-r[1],e[2]=n[2]-r[2],e[3]=n[3]-r[3],e}function Te(e,n,r){return e[0]=n[0]*r[0],e[1]=n[1]*r[1],e[2]=n[2]*r[2],e[3]=n[3]*r[3],e}function Re(e,n,r){return e[0]=n[0]/r[0],e[1]=n[1]/r[1],e[2]=n[2]/r[2],e[3]=n[3]/r[3],e}function jn(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e[3]=Math.ceil(n[3]),e}function Xn(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e[3]=Math.floor(n[3]),e}function kn(e,n,r){return e[0]=Math.min(n[0],r[0]),e[1]=Math.min(n[1],r[1]),e[2]=Math.min(n[2],r[2]),e[3]=Math.min(n[3],r[3]),e}function Vn(e,n,r){return e[0]=Math.max(n[0],r[0]),e[1]=Math.max(n[1],r[1]),e[2]=Math.max(n[2],r[2]),e[3]=Math.max(n[3],r[3]),e}function Yn(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e[3]=Math.round(n[3]),e}function on(e,n,r){return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=n[3]*r,e}function Gn(e,n,r,t){return e[0]=n[0]+r[0]*t,e[1]=n[1]+r[1]*t,e[2]=n[2]+r[2]*t,e[3]=n[3]+r[3]*t,e}function be(e,n){let r=n[0]-e[0],t=n[1]-e[1],i=n[2]-e[2],l=n[3]-e[3];return Math.hypot(r,t,i,l)}function Ie(e,n){let r=n[0]-e[0],t=n[1]-e[1],i=n[2]-e[2],l=n[3]-e[3];return r*r+t*t+i*i+l*l}function Oe(e){let n=e[0],r=e[1],t=e[2],i=e[3];return Math.hypot(n,r,t,i)}function Fe(e){let n=e[0],r=e[1],t=e[2],i=e[3];return n*n+r*r+t*t+i*i}function Hn(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}function Qn(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}function Ne(e,n){let r=n[0],t=n[1],i=n[2],l=n[3],s=r*r+t*t+i*i+l*l;return s>0&&(s=1/Math.sqrt(s)),e[0]=r*s,e[1]=t*s,e[2]=i*s,e[3]=l*s,e}function Zn(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}function Wn(e,n,r,t){let i=r[0]*t[1]-r[1]*t[0],l=r[0]*t[2]-r[2]*t[0],s=r[0]*t[3]-r[3]*t[0],c=r[1]*t[2]-r[2]*t[1],a=r[1]*t[3]-r[3]*t[1],f=r[2]*t[3]-r[3]*t[2],h=n[0],m=n[1],d=n[2],M=n[3];return e[0]=m*f-d*a+M*c,e[1]=-(h*f)+d*s-M*l,e[2]=h*a-m*s+M*i,e[3]=-(h*c)+m*l-d*i,e}function Jn(e,n,r,t){let i=n[0],l=n[1],s=n[2],c=n[3];return e[0]=i+t*(r[0]-i),e[1]=l+t*(r[1]-l),e[2]=s+t*(r[2]-s),e[3]=c+t*(r[3]-c),e}function Kn(e,n){n=n||1;var r,t,i,l,s,c;do{r=j()*2-1,t=j()*2-1,s=r*r+t*t}while(s>=1);do{i=j()*2-1,l=j()*2-1,c=i*i+l*l}while(c>=1);var a=Math.sqrt((1-s)/c);return e[0]=n*r,e[1]=n*t,e[2]=n*i*a,e[3]=n*l*a,e}function gn(e,n,r){let t=n[0],i=n[1],l=n[2],s=n[3];return e[0]=r[0]*t+r[4]*i+r[8]*l+r[12]*s,e[1]=r[1]*t+r[5]*i+r[9]*l+r[13]*s,e[2]=r[2]*t+r[6]*i+r[10]*l+r[14]*s,e[3]=r[3]*t+r[7]*i+r[11]*l+r[15]*s,e}function un(e,n,r){let t=n[0],i=n[1],l=n[2],s=r[0],c=r[1],a=r[2],f=r[3],h=f*t+c*l-a*i,m=f*i+a*t-s*l,d=f*l+s*i-c*t,M=-s*t-c*i-a*l;return e[0]=h*f+M*-s+m*-a-d*-c,e[1]=m*f+M*-c+d*-s-h*-a,e[2]=d*f+M*-a+h*-c-m*-s,e[3]=n[3],e}function er(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function nr(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function rr(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]&&e[3]===n[3]}function tr(e,n){let r=e[0],t=e[1],i=e[2],l=e[3],s=n[0],c=n[1],a=n[2],f=n[3];return Math.abs(r-s)<=1e-6*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(t-c)<=1e-6*Math.max(1,Math.abs(t),Math.abs(c))&&Math.abs(i-a)<=1e-6*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(l-f)<=1e-6*Math.max(1,Math.abs(l),Math.abs(f))}const ir=Le,lr=Te,sr=Re,cr=be,ar=Ie,fr=Oe,hr=Fe,mr=function(){let e=$e();return function(n,r,t,i,l,s){let c,a;for(r||(r=4),t||(t=0),i?a=Math.min(i*r+t,n.length):a=n.length,c=t;c<a;c+=r)e[0]=n[c],e[1]=n[c+1],e[2]=n[c+2],e[3]=n[c+3],l(e,e,s),n[c]=e[0],n[c+1]=e[1],n[c+2]=e[2],n[c+3]=e[3];return n}}(),Mr=Object.freeze(Object.defineProperty({__proto__:null,add:qn,ceil:jn,clone:_n,copy:Un,create:$e,cross:Wn,dist:cr,distance:be,div:sr,divide:Re,dot:Zn,equals:tr,exactEquals:rr,floor:Xn,forEach:mr,fromValues:Dn,inverse:Qn,len:fr,length:Oe,lerp:Jn,max:Vn,min:kn,mul:lr,multiply:Te,negate:Hn,normalize:Ne,random:Kn,round:Yn,scale:on,scaleAndAdd:Gn,set:Bn,sqrDist:ar,sqrLen:hr,squaredDistance:Ie,squaredLength:Fe,str:nr,sub:ir,subtract:Le,transformMat4:gn,transformQuat:un,zero:er},Symbol.toStringTag,{value:"Module"}));function re(){let e=new C(4);return C!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function dr(e,n,r){r=r*.5;let t=Math.sin(r);return e[0]=t*n[0],e[1]=t*n[1],e[2]=t*n[2],e[3]=Math.cos(r),e}function Z(e,n,r,t){let i=n[0],l=n[1],s=n[2],c=n[3],a=r[0],f=r[1],h=r[2],m=r[3],d,M,y,p,x;return M=i*a+l*f+s*h+c*m,M<0&&(M=-M,a=-a,f=-f,h=-h,m=-m),1-M>1e-6?(d=Math.acos(M),y=Math.sin(d),p=Math.sin((1-t)*d)/y,x=Math.sin(t*d)/y):(p=1-t,x=t),e[0]=p*i+x*a,e[1]=p*l+x*f,e[2]=p*s+x*h,e[3]=p*c+x*m,e}function xr(e,n){let r=n[0]+n[4]+n[8],t;if(r>0)t=Math.sqrt(r+1),e[3]=.5*t,t=.5/t,e[0]=(n[5]-n[7])*t,e[1]=(n[6]-n[2])*t,e[2]=(n[1]-n[3])*t;else{let i=0;n[4]>n[0]&&(i=1),n[8]>n[i*3+i]&&(i=2);let l=(i+1)%3,s=(i+2)%3;t=Math.sqrt(n[i*3+i]-n[l*3+l]-n[s*3+s]+1),e[i]=.5*t,t=.5/t,e[3]=(n[l*3+s]-n[s*3+l])*t,e[l]=(n[l*3+i]+n[i*3+l])*t,e[s]=(n[s*3+i]+n[i*3+s])*t}return e}const Ce=Ne;(function(){let e=u(),n=J(1,0,0),r=J(0,1,0);return function(t,i,l){let s=H(i,l);return s<-.999999?(o(e,n,i),Pe(e)<1e-6&&o(e,r,i),ve(e,e),dr(t,e,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(o(e,i,l),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1+s,Ce(t,t))}})();(function(){let e=re(),n=re();return function(r,t,i,l,s,c){return Z(e,t,s,c),Z(n,i,l,c),Z(r,e,n,2*c*(1-c)),r}})();(function(){let e=ie();return function(n,r,t,i){return e[0]=t[0],e[3]=t[1],e[6]=t[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],Ce(n,xr(n,e))}})();function yr(){let e=new C(2);return C!=Float32Array&&(e[0]=0,e[1]=0),e}(function(){let e=yr();return function(n,r,t,i,l,s){let c,a;for(r||(r=2),t||(t=0),i?a=Math.min(i*r+t,n.length):a=n.length,c=t;c<a;c+=r)e[0]=n[c],e[1]=n[c+1],l(e,e,s),n[c]=e[0],n[c+1]=e[1];return n}})();const _e=e=>{const n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,640,480,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),{fbo:n,texture:r,bind(t){t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.viewport(0,0,640,480)},release(t){t.bindFramebuffer(t.FRAMEBUFFER,null)},bindTexture(t){t.bindTexture(t.TEXTURE_2D,this.texture)}}},N=(e,n,r,t,i)=>{t=t||e.FLOAT,i=i||Float32Array;let l=n;l.constructor===Array&&(l=new i(n));const s=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),{buffer:s,bufferDesc:r,count:n.length/r.stride,draw(c,a){a=a!=null?a:c.TRIANGLES,c.bindBuffer(c.ARRAY_BUFFER,this.buffer);for(const{position:f,size:h,offset:m}of this.bufferDesc.attributes)c.enableVertexAttribArray(f),c.vertexAttribPointer(f,h,t,!1,this.bufferDesc.stride*i.BYTES_PER_ELEMENT,m*i.BYTES_PER_ELEMENT);c.drawArrays(a,0,this.count),c.bindBuffer(c.ARRAY_BUFFER,null)}}},Q=(e,n,r)=>{const t=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw new Error(`ERROR compiling vertex shader: ${e.getShaderInfoLog(t)}`);const i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error(`ERROR compiling fragment shader: ${e.getShaderInfoLog(i)}`);const l=e.createProgram();if(e.attachShader(l,t),e.attachShader(l,i),e.linkProgram(l),!e.getProgramParameter(l,e.LINK_STATUS))throw new Error(`ERROR linking shader program: ${e.getShaderInfoLog(l)}`);return e.deleteShader(t),e.deleteShader(i),{program:l,attributeLocations:{},uniformLocations:{},useProgram(s){s.useProgram(this.program)},getAttribLocation(s,c){return this.attributeLocations[c]||(this.attributeLocations[c]=s.getAttribLocation(this.program,c)),this.attributeLocations[c]},getUniformLocation(s,c){return this.uniformLocations[c]||(this.uniformLocations[c]=s.getUniformLocation(this.program,c)),this.uniformLocations[c]},enableVertexAttribArray(s,c){s.enableVertexAttribArray(this.getAttribLocation(s,c))},vertexAttribPointer(s,c,a,f,h,m,d){s.vertexAttribPointer(this.getAttribLocation(s,c),a,f,h,m,d)},uniformMatrix4fv(s,c,a,f){f.constructor===Array&&(f=new Float32Array(f)),s.uniformMatrix4fv(this.getUniformLocation(s,c),a,f)},uniform3fv(s,c,a){a.constructor===Array&&(a=new Float32Array(a)),s.uniform3fv(this.getUniformLocation(s,c),a)},uniform1f(s,c,a){a.constructor===Array&&(a=new Float32Array(a)),s.uniform1f(this.getUniformLocation(s,c),a)}}},pr=`precision mediump float;attribute vec3 aVertexCoord;attribute vec3 aVertexNormal;const vec3 diffuse = vec3(1.0);const vec3 lightDir = vec3(0.0, 0.0, 1.0);uniform mat4 projection;uniform mat4 modelView;struct Material {vec3 ambient;vec3 diffuse;};uniform Material material;varying lowp vec3 vertexColor;mat3 transpose(mat3 inMatrix) {vec3 i0 = inMatrix[0];vec3 i1 = inMatrix[1];vec3 i2 = inMatrix[2];mat3 outMatrix = mat3(vec3(i0.x, i1.x, i2.x),vec3(i0.y, i1.y, i2.y),vec3(i0.z, i1.z, i2.z));return outMatrix;}float det(mat2 matrix) {return matrix[0].x * matrix[1].y - matrix[0].y * matrix[1].x;}mat3 inverse(mat3 matrix) {vec3 row0 = matrix[0];vec3 row1 = matrix[1];vec3 row2 = matrix[2];vec3 minors0 = vec3(det(mat2(row1.y, row1.z, row2.y, row2.z)),det(mat2(row1.z, row1.x, row2.z, row2.x)),det(mat2(row1.x, row1.y, row2.x, row2.y)));vec3 minors1 = vec3(det(mat2(row2.y, row2.z, row0.y, row0.z)),det(mat2(row2.z, row2.x, row0.z, row0.x)),det(mat2(row2.x, row2.y, row0.x, row0.y)));vec3 minors2 = vec3(det(mat2(row0.y, row0.z, row1.y, row1.z)),det(mat2(row0.z, row0.x, row1.z, row1.x)),det(mat2(row0.x, row0.y, row1.x, row1.y)));mat3 adj = transpose(mat3(minors0, minors1, minors2));return (1.0 / dot(row0, minors0)) * adj;}void main() {vec3 fragPos = vec3(modelView * vec4(aVertexCoord, 1.0));vec3 normal = normalize(transpose(inverse(mat3(modelView))) * aVertexNormal);float diff = max(dot(normal, lightDir), 0.0);vertexColor = material.ambient + (diffuse * material.diffuse * diff);gl_Position = projection * vec4(fragPos, 1.0);}`,Sr=`precision mediump float;varying lowp vec3 vertexColor;void main() {gl_FragColor = vec4(vertexColor, 1.0);}`,wr=e=>Q(e,pr,Sr),Er=`precision mediump float;attribute vec3 aVertexCoord;uniform mat4 projection;uniform mat4 modelView;void main() {gl_Position = projection * modelView * vec4(aVertexCoord, 1.0);}`,zr=`precision mediump float;uniform vec3 color;void main() {gl_FragColor = vec4(color, 1.0);}`,Ar=e=>Q(e,Er,zr),vr=`precision mediump float;attribute vec3 aVertexCoord;attribute vec2 aUVCoord;uniform mat4 projection;uniform mat4 modelView;varying lowp vec2 uvCoord;void main() {uvCoord = aUVCoord;gl_Position = projection * modelView * vec4(aVertexCoord, 1.0);}`,Pr=`precision mediump float;varying lowp vec2 uvCoord;uniform sampler2D tex;void main() {gl_FragColor = texture2D(tex, uvCoord);}`,$r=e=>Q(e,vr,Pr),Lr=(e,n,r,t,i)=>{const{wheelMesh:l,monitorMesh:s,monitorIntake:c,chestBoxMesh:a,chestPlateMesh:f,powerMesh:h,powerPinMesh:m,abdomenMesh:d,waistMesh:M,shoulderConnectorMesh:y,shoulderPlateMesh:p,bigArmMesh:x,bigArmCoverMesh:w,bigArmConnectorMesh:$,smallArmMesh:z,smallArmCoverMesh:E,wheelSmallMesh:v,clawMesh:A,clawCoverMesh:R}=r,P={stride:6,attributes:[{position:t,size:3,offset:0},{position:i,size:3,offset:3}]};n.wheel=N(e,l,P),n.monitor=N(e,s,P),n.monitorIntake=N(e,c,P),n.chestBox=N(e,a,P),n.chestPlate=N(e,f,P),n.power=N(e,h,P),n.powerPin=N(e,m,P),n.abdomen=N(e,d,P),n.waist=N(e,M,P),n.shoulderConnector=N(e,y,P),n.shoulderPlate=N(e,p,P),n.bigArm=N(e,x,P),n.bigArmCover=N(e,w,P),n.bigArmConnector=N(e,$,P),n.smallArm=N(e,z,P),n.smallArmCover=N(e,E,P),n.wheelSmall=N(e,v,P),n.claw=N(e,A,P),n.clawCover=N(e,R,P)},Tr=(e,n,r,t)=>{const{colorTimerMesh:i}=r,l={stride:6,attributes:[{position:t,size:3,offset:0}]};n.colorTimer=N(e,i,l)},Y=(e,n)=>({ambient:e,diffuse:n,apply(r,t){t.uniform3fv(r,"material.ambient",e),t.uniform3fv(r,"material.diffuse",n)}}),_={plastic:Y([.2,.2,.2],[.55,.55,.55]),blackPlastic:Y([.15,.15,.15],[.25,.25,.25]),chrome:Y([.25,.25,.25],[.4,.4,.4]),brass:Y([.329412,.223529,.027451],[.780392,.568627,.113725])},S={initialized:!1,mesh:{},screenRenderer:null},Rr=(e,n)=>{e.enable(e.DEPTH_TEST),e.enable(e.BLEND),e.enable(e.CULL_FACE),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),S.commonShader=wr(e),S.flatShader=Ar(e),S.texturedShader=$r(e);{const r=S.commonShader.getAttribLocation(e,"aVertexCoord"),t=S.commonShader.getAttribLocation(e,"aVertexNormal");Lr(e,S.mesh,n,r,t)}{const r=S.flatShader.getAttribLocation(e,"aVertexCoord");Tr(e,S.mesh,n,r)}{const r=S.texturedShader.getAttribLocation(e,"aVertexCoord"),t=S.texturedShader.getAttribLocation(e,"aUVCoord");S.mesh.screen=N(e,[-12.5,18.75/2,0,0,1,12.5,-18.75/2,0,1,0,12.5,18.75/2,0,1,1,-12.5,18.75/2,0,0,1,-12.5,-18.75/2,0,0,0,12.5,-18.75/2,0,1,0],{stride:5,attributes:[{position:r,size:3,offset:0},{position:t,size:2,offset:3}]})}S.screenFrameBuffer=_e(e),S.startTime=Date.now(),S.initialized=!0},br=(e,n,r)=>{S.w=n,S.h=r;const t=K();Me(t,45,n/r,.1,100),S.commonShader.useProgram(e),S.commonShader.uniformMatrix4fv(e,"projection",!1,t),S.flatShader.useProgram(e),S.flatShader.uniformMatrix4fv(e,"projection",!1,t),S.texturedShader.useProgram(e),S.texturedShader.uniformMatrix4fv(e,"projection",!1,t)},Ir=(e,n)=>{const{status:r}=n;if(S.screenFrameBuffer.bind(e),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),S.screenRenderer&&S.screenRenderer(e),S.screenFrameBuffer.release(e),e.viewport(0,0,S.w,S.h),e.clearColor(...r.webgl.clearColor),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),!S.initialized)return;S.commonShader.useProgram(e);const t=K();g(t,t,[.01,.01,.01]),r.entityStatus.toMatrix(t),D(t,t,[0,-12,0]);for(let c=0;c<10;c++)S.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.plastic.apply(e,S.commonShader),S.mesh.waist.draw(e),D(t,t,[0,1,0]),q(t,t,U(r.headStatus.rotationZ/10)),G(t,t,U(r.headStatus.rotationX/10)),S.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.blackPlastic.apply(e,S.commonShader),S.mesh.abdomen.draw(e),D(t,t,[0,1,0]);D(t,t,[0,6,0]);const i=V(t);S.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.plastic.apply(e,S.commonShader),S.mesh.chestBox.draw(e),_.chrome.apply(e,S.commonShader),S.mesh.chestPlate.draw(e),_.blackPlastic.apply(e,S.commonShader),S.mesh.power.draw(e),_.brass.apply(e,S.commonShader),S.mesh.powerPin.draw(e);const l={},s={};if(te(e,t,r.armStatus.right,1,l),te(e,t,r.armStatus.left,-1,s),D(t,t,[0,12.875,0]),W(t,t,U(r.headStatus.rotationY/2)),S.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.chrome.apply(e,S.commonShader),S.mesh.wheel.draw(e),W(t,t,U(r.headStatus.rotationY/2)),D(t,t,[0,.375,0]),S.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.plastic.apply(e,S.commonShader),S.mesh.monitor.draw(e),_.chrome.apply(e,S.commonShader),S.mesh.monitorIntake.draw(e),D(t,t,[0,9.25+1.875,5.25]),S.texturedShader.useProgram(e),S.texturedShader.uniformMatrix4fv(e,"modelView",!1,t),S.screenFrameBuffer.bindTexture(e),S.mesh.screen.draw(e),S.flatShader.useProgram(e),S.flatShader.uniformMatrix4fv(e,"modelView",!1,i),r.colorTimer.status==="blue")S.flatShader.uniform3fv(e,"color",[.25,1,1]);else if(r.colorTimer.status==="blink"){const c=Date.now()-S.startTime;Math.floor(c/r.colorTimer.blinkDuration)%2===0?S.flatShader.uniform3fv(e,"color",[1,.25,.25]):S.flatShader.uniform3fv(e,"color",[.4,.4,.4])}else S.flatShader.uniform3fv(e,"color",[.4,.4,.4]);S.mesh.colorTimer.draw(e)},Or=e=>{S.screenRenderer=e},te=(e,n,r,t,i)=>{n=V(n),g(n,n,[t,1,t]),D(n,n,[14.5,7.5,0]),G(n,n,U(t*r.rotation[0])),S.commonShader.uniformMatrix4fv(e,"modelView",!1,n),_.plastic.apply(e,S.commonShader),S.mesh.shoulderConnector.draw(e),_.chrome.apply(e,S.commonShader),S.mesh.shoulderPlate.draw(e),D(n,n,[4.75,0,0]),q(n,n,U(r.rotation[1]/2)),S.commonShader.uniformMatrix4fv(e,"modelView",!1,n),_.blackPlastic.apply(e,S.commonShader),S.mesh.wheelSmall.draw(e),q(n,n,U(r.rotation[1]/2)),S.commonShader.uniformMatrix4fv(e,"modelView",!1,n),i.bigArm=V(n),_.chrome.apply(e,S.commonShader),S.mesh.bigArm.draw(e),_.plastic.apply(e,S.commonShader),S.mesh.bigArmCover.draw(e),D(n,n,[20,0,0]),G(n,n,U(-1*r.rotation[2])),S.commonShader.uniformMatrix4fv(e,"modelView",!1,n),_.blackPlastic.apply(e,S.commonShader),S.mesh.bigArmConnector.draw(e),D(n,n,[4.5,0,0]),q(n,n,U(t*r.rotation[3]/2)),S.commonShader.uniformMatrix4fv(e,"modelView",!1,n),S.mesh.wheelSmall.draw(e),q(n,n,U(t*r.rotation[3]/2)),S.commonShader.uniformMatrix4fv(e,"modelView",!1,n),i.smallArm=V(n),_.chrome.apply(e,S.commonShader),S.mesh.smallArm.draw(e),_.plastic.apply(e,S.commonShader),S.mesh.smallArmCover.draw(e),D(n,n,[25,0,0]),q(n,n,U(t*r.rotation[4])),S.commonShader.uniformMatrix4fv(e,"modelView",!1,n),_.chrome.apply(e,S.commonShader),S.mesh.claw.draw(e),_.plastic.apply(e,S.commonShader),S.mesh.clawCover.draw(e)},Fr={mat3:m1,mat4:W1,vec3:Cn,vec4:Mr,toRadian:U},Nr={createFrameBuffer:_e,createVertexBuffer:N,createShaderProgram:Q};export{Fr as glm,Nr as glx,Rr as initializeGL,Ir as paintGL,br as resizeGL,Or as setScreenRenderer};