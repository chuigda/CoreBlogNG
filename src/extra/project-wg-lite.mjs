let C=typeof Float32Array!="undefined"?Float32Array:Array,j=Math.random;const Ue=Math.PI/180;function o(e){return e*Ue}Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function le(){let e=new C(9);return C!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Be(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[4],e[4]=r[5],e[5]=r[6],e[6]=r[8],e[7]=r[9],e[8]=r[10],e}function qe(e){let r=new C(9);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function je(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Xe(e,r,n,t,i,l,s,c,h){let a=new C(9);return a[0]=e,a[1]=r,a[2]=n,a[3]=t,a[4]=i,a[5]=l,a[6]=s,a[7]=c,a[8]=h,a}function ke(e,r,n,t,i,l,s,c,h,a){return e[0]=r,e[1]=n,e[2]=t,e[3]=i,e[4]=l,e[5]=s,e[6]=c,e[7]=h,e[8]=a,e}function Ye(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ve(e,r){if(e===r){let n=r[1],t=r[2],i=r[5];e[1]=r[3],e[2]=r[6],e[3]=n,e[5]=r[7],e[6]=t,e[7]=i}else e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8];return e}function De(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=r[4],c=r[5],h=r[6],a=r[7],f=r[8],m=f*s-c*a,d=-f*l+c*h,M=a*l-s*h,y=n*m+t*d+i*M;return y?(y=1/y,e[0]=m*y,e[1]=(-f*t+i*a)*y,e[2]=(c*t-i*s)*y,e[3]=d*y,e[4]=(f*n-i*h)*y,e[5]=(-c*n+i*l)*y,e[6]=M*y,e[7]=(-a*n+t*h)*y,e[8]=(s*n-t*l)*y,e):null}function Ge(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=r[4],c=r[5],h=r[6],a=r[7],f=r[8];return e[0]=s*f-c*a,e[1]=i*a-t*f,e[2]=t*c-i*s,e[3]=c*h-l*f,e[4]=n*f-i*h,e[5]=i*l-n*c,e[6]=l*a-s*h,e[7]=t*h-n*a,e[8]=n*s-t*l,e}function He(e){let r=e[0],n=e[1],t=e[2],i=e[3],l=e[4],s=e[5],c=e[6],h=e[7],a=e[8];return r*(a*l-s*h)+n*(-a*i+s*c)+t*(h*i-l*c)}function se(e,r,n){let t=r[0],i=r[1],l=r[2],s=r[3],c=r[4],h=r[5],a=r[6],f=r[7],m=r[8],d=n[0],M=n[1],y=n[2],S=n[3],x=n[4],w=n[5],$=n[6],z=n[7],E=n[8];return e[0]=d*t+M*s+y*a,e[1]=d*i+M*c+y*f,e[2]=d*l+M*h+y*m,e[3]=S*t+x*s+w*a,e[4]=S*i+x*c+w*f,e[5]=S*l+x*h+w*m,e[6]=$*t+z*s+E*a,e[7]=$*i+z*c+E*f,e[8]=$*l+z*h+E*m,e}function Ze(e,r,n){let t=r[0],i=r[1],l=r[2],s=r[3],c=r[4],h=r[5],a=r[6],f=r[7],m=r[8],d=n[0],M=n[1];return e[0]=t,e[1]=i,e[2]=l,e[3]=s,e[4]=c,e[5]=h,e[6]=d*t+M*s+a,e[7]=d*i+M*c+f,e[8]=d*l+M*h+m,e}function Qe(e,r,n){let t=r[0],i=r[1],l=r[2],s=r[3],c=r[4],h=r[5],a=r[6],f=r[7],m=r[8],d=Math.sin(n),M=Math.cos(n);return e[0]=M*t+d*s,e[1]=M*i+d*c,e[2]=M*l+d*h,e[3]=M*s-d*t,e[4]=M*c-d*i,e[5]=M*h-d*l,e[6]=a,e[7]=f,e[8]=m,e}function We(e,r,n){let t=n[0],i=n[1];return e[0]=t*r[0],e[1]=t*r[1],e[2]=t*r[2],e[3]=i*r[3],e[4]=i*r[4],e[5]=i*r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Je(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=r[0],e[7]=r[1],e[8]=1,e}function Ke(e,r){let n=Math.sin(r),t=Math.cos(r);return e[0]=t,e[1]=n,e[2]=0,e[3]=-n,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ge(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=r[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ue(e,r){return e[0]=r[0],e[1]=r[1],e[2]=0,e[3]=r[2],e[4]=r[3],e[5]=0,e[6]=r[4],e[7]=r[5],e[8]=1,e}function e1(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=n+n,c=t+t,h=i+i,a=n*s,f=t*s,m=t*c,d=i*s,M=i*c,y=i*h,S=l*s,x=l*c,w=l*h;return e[0]=1-m-y,e[3]=f-w,e[6]=d+x,e[1]=f+w,e[4]=1-a-y,e[7]=M-S,e[2]=d-x,e[5]=M+S,e[8]=1-a-m,e}function r1(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=r[4],c=r[5],h=r[6],a=r[7],f=r[8],m=r[9],d=r[10],M=r[11],y=r[12],S=r[13],x=r[14],w=r[15],$=n*c-t*s,z=n*h-i*s,E=n*a-l*s,v=t*h-i*c,A=t*a-l*c,R=i*a-l*h,P=f*S-m*y,b=f*x-d*y,L=f*w-M*y,F=m*x-d*S,I=m*w-M*S,O=d*w-M*x,T=$*O-z*I+E*F+v*L-A*b+R*P;return T?(T=1/T,e[0]=(c*O-h*I+a*F)*T,e[1]=(h*L-s*O-a*b)*T,e[2]=(s*I-c*L+a*P)*T,e[3]=(i*I-t*O-l*F)*T,e[4]=(n*O-i*L+l*b)*T,e[5]=(t*L-n*I-l*P)*T,e[6]=(S*R-x*A+w*v)*T,e[7]=(x*E-y*R-w*z)*T,e[8]=(y*A-S*E+w*$)*T,e):null}function n1(e,r,n){return e[0]=2/r,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function t1(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function i1(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function l1(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e[4]=r[4]+n[4],e[5]=r[5]+n[5],e[6]=r[6]+n[6],e[7]=r[7]+n[7],e[8]=r[8]+n[8],e}function ce(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e[4]=r[4]-n[4],e[5]=r[5]-n[5],e[6]=r[6]-n[6],e[7]=r[7]-n[7],e[8]=r[8]-n[8],e}function s1(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*n,e}function c1(e,r,n,t){return e[0]=r[0]+n[0]*t,e[1]=r[1]+n[1]*t,e[2]=r[2]+n[2]*t,e[3]=r[3]+n[3]*t,e[4]=r[4]+n[4]*t,e[5]=r[5]+n[5]*t,e[6]=r[6]+n[6]*t,e[7]=r[7]+n[7]*t,e[8]=r[8]+n[8]*t,e}function h1(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]}function a1(e,r){let n=e[0],t=e[1],i=e[2],l=e[3],s=e[4],c=e[5],h=e[6],a=e[7],f=e[8],m=r[0],d=r[1],M=r[2],y=r[3],S=r[4],x=r[5],w=r[6],$=r[7],z=r[8];return Math.abs(n-m)<=1e-6*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(t-d)<=1e-6*Math.max(1,Math.abs(t),Math.abs(d))&&Math.abs(i-M)<=1e-6*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(l-y)<=1e-6*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(s-S)<=1e-6*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-x)<=1e-6*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-w)<=1e-6*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(a-$)<=1e-6*Math.max(1,Math.abs(a),Math.abs($))&&Math.abs(f-z)<=1e-6*Math.max(1,Math.abs(f),Math.abs(z))}const f1=se,m1=ce,M1=Object.freeze(Object.defineProperty({__proto__:null,add:l1,adjoint:Ge,clone:qe,copy:je,create:le,determinant:He,equals:a1,exactEquals:h1,frob:i1,fromMat2d:ue,fromMat4:Be,fromQuat:e1,fromRotation:Ke,fromScaling:ge,fromTranslation:Je,fromValues:Xe,identity:Ye,invert:De,mul:f1,multiply:se,multiplyScalar:s1,multiplyScalarAndAdd:c1,normalFromMat4:r1,projection:n1,rotate:Qe,scale:We,set:ke,str:t1,sub:m1,subtract:ce,translate:Ze,transpose:Ve},Symbol.toStringTag,{value:"Module"}));function K(){let e=new C(16);return C!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Y(e){let r=new C(16);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function d1(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function x1(e,r,n,t,i,l,s,c,h,a,f,m,d,M,y,S){let x=new C(16);return x[0]=e,x[1]=r,x[2]=n,x[3]=t,x[4]=i,x[5]=l,x[6]=s,x[7]=c,x[8]=h,x[9]=a,x[10]=f,x[11]=m,x[12]=d,x[13]=M,x[14]=y,x[15]=S,x}function y1(e,r,n,t,i,l,s,c,h,a,f,m,d,M,y,S,x){return e[0]=r,e[1]=n,e[2]=t,e[3]=i,e[4]=l,e[5]=s,e[6]=c,e[7]=h,e[8]=a,e[9]=f,e[10]=m,e[11]=d,e[12]=M,e[13]=y,e[14]=S,e[15]=x,e}function he(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function S1(e,r){if(e===r){let n=r[1],t=r[2],i=r[3],l=r[6],s=r[7],c=r[11];e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=n,e[6]=r[9],e[7]=r[13],e[8]=t,e[9]=l,e[11]=r[14],e[12]=i,e[13]=s,e[14]=c}else e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12],e[4]=r[1],e[5]=r[5],e[6]=r[9],e[7]=r[13],e[8]=r[2],e[9]=r[6],e[10]=r[10],e[11]=r[14],e[12]=r[3],e[13]=r[7],e[14]=r[11],e[15]=r[15];return e}function p1(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=r[4],c=r[5],h=r[6],a=r[7],f=r[8],m=r[9],d=r[10],M=r[11],y=r[12],S=r[13],x=r[14],w=r[15],$=n*c-t*s,z=n*h-i*s,E=n*a-l*s,v=t*h-i*c,A=t*a-l*c,R=i*a-l*h,P=f*S-m*y,b=f*x-d*y,L=f*w-M*y,F=m*x-d*S,I=m*w-M*S,O=d*w-M*x,T=$*O-z*I+E*F+v*L-A*b+R*P;return T?(T=1/T,e[0]=(c*O-h*I+a*F)*T,e[1]=(i*I-t*O-l*F)*T,e[2]=(S*R-x*A+w*v)*T,e[3]=(d*A-m*R-M*v)*T,e[4]=(h*L-s*O-a*b)*T,e[5]=(n*O-i*L+l*b)*T,e[6]=(x*E-y*R-w*z)*T,e[7]=(f*R-d*E+M*z)*T,e[8]=(s*I-c*L+a*P)*T,e[9]=(t*L-n*I-l*P)*T,e[10]=(y*A-S*E+w*$)*T,e[11]=(m*E-f*A-M*$)*T,e[12]=(c*b-s*F-h*P)*T,e[13]=(n*F-t*b+i*P)*T,e[14]=(S*z-y*v-x*$)*T,e[15]=(f*v-m*z+d*$)*T,e):null}function w1(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=r[4],c=r[5],h=r[6],a=r[7],f=r[8],m=r[9],d=r[10],M=r[11],y=r[12],S=r[13],x=r[14],w=r[15],$=n*c-t*s,z=n*h-i*s,E=n*a-l*s,v=t*h-i*c,A=t*a-l*c,R=i*a-l*h,P=f*S-m*y,b=f*x-d*y,L=f*w-M*y,F=m*x-d*S,I=m*w-M*S,O=d*w-M*x;return e[0]=c*O-h*I+a*F,e[1]=i*I-t*O-l*F,e[2]=S*R-x*A+w*v,e[3]=d*A-m*R-M*v,e[4]=h*L-s*O-a*b,e[5]=n*O-i*L+l*b,e[6]=x*E-y*R-w*z,e[7]=f*R-d*E+M*z,e[8]=s*I-c*L+a*P,e[9]=t*L-n*I-l*P,e[10]=y*A-S*E+w*$,e[11]=m*E-f*A-M*$,e[12]=c*b-s*F-h*P,e[13]=n*F-t*b+i*P,e[14]=S*z-y*v-x*$,e[15]=f*v-m*z+d*$,e}function E1(e){let r=e[0],n=e[1],t=e[2],i=e[3],l=e[4],s=e[5],c=e[6],h=e[7],a=e[8],f=e[9],m=e[10],d=e[11],M=e[12],y=e[13],S=e[14],x=e[15],w=r*s-n*l,$=r*c-t*l,z=n*c-t*s,E=a*y-f*M,v=a*S-m*M,A=f*S-m*y,R=r*A-n*v+t*E,P=l*A-s*v+c*E,b=a*z-f*$+m*w,L=M*z-y*$+S*w;return h*R-i*P+x*b-d*L}function ae(e,r,n){let t=r[0],i=r[1],l=r[2],s=r[3],c=r[4],h=r[5],a=r[6],f=r[7],m=r[8],d=r[9],M=r[10],y=r[11],S=r[12],x=r[13],w=r[14],$=r[15],z=n[0],E=n[1],v=n[2],A=n[3];return e[0]=z*t+E*c+v*m+A*S,e[1]=z*i+E*h+v*d+A*x,e[2]=z*l+E*a+v*M+A*w,e[3]=z*s+E*f+v*y+A*$,z=n[4],E=n[5],v=n[6],A=n[7],e[4]=z*t+E*c+v*m+A*S,e[5]=z*i+E*h+v*d+A*x,e[6]=z*l+E*a+v*M+A*w,e[7]=z*s+E*f+v*y+A*$,z=n[8],E=n[9],v=n[10],A=n[11],e[8]=z*t+E*c+v*m+A*S,e[9]=z*i+E*h+v*d+A*x,e[10]=z*l+E*a+v*M+A*w,e[11]=z*s+E*f+v*y+A*$,z=n[12],E=n[13],v=n[14],A=n[15],e[12]=z*t+E*c+v*m+A*S,e[13]=z*i+E*h+v*d+A*x,e[14]=z*l+E*a+v*M+A*w,e[15]=z*s+E*f+v*y+A*$,e}function U(e,r,n){let t=n[0],i=n[1],l=n[2],s,c,h,a,f,m,d,M,y,S,x,w;return r===e?(e[12]=r[0]*t+r[4]*i+r[8]*l+r[12],e[13]=r[1]*t+r[5]*i+r[9]*l+r[13],e[14]=r[2]*t+r[6]*i+r[10]*l+r[14],e[15]=r[3]*t+r[7]*i+r[11]*l+r[15]):(s=r[0],c=r[1],h=r[2],a=r[3],f=r[4],m=r[5],d=r[6],M=r[7],y=r[8],S=r[9],x=r[10],w=r[11],e[0]=s,e[1]=c,e[2]=h,e[3]=a,e[4]=f,e[5]=m,e[6]=d,e[7]=M,e[8]=y,e[9]=S,e[10]=x,e[11]=w,e[12]=s*t+f*i+y*l+r[12],e[13]=c*t+m*i+S*l+r[13],e[14]=h*t+d*i+x*l+r[14],e[15]=a*t+M*i+w*l+r[15]),e}function g(e,r,n){let t=n[0],i=n[1],l=n[2];return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*i,e[5]=r[5]*i,e[6]=r[6]*i,e[7]=r[7]*i,e[8]=r[8]*l,e[9]=r[9]*l,e[10]=r[10]*l,e[11]=r[11]*l,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function z1(e,r,n,t){let i=t[0],l=t[1],s=t[2],c=Math.hypot(i,l,s),h,a,f,m,d,M,y,S,x,w,$,z,E,v,A,R,P,b,L,F,I,O,T,B;return c<1e-6?null:(c=1/c,i*=c,l*=c,s*=c,h=Math.sin(n),a=Math.cos(n),f=1-a,m=r[0],d=r[1],M=r[2],y=r[3],S=r[4],x=r[5],w=r[6],$=r[7],z=r[8],E=r[9],v=r[10],A=r[11],R=i*i*f+a,P=l*i*f+s*h,b=s*i*f-l*h,L=i*l*f-s*h,F=l*l*f+a,I=s*l*f+i*h,O=i*s*f+l*h,T=l*s*f-i*h,B=s*s*f+a,e[0]=m*R+S*P+z*b,e[1]=d*R+x*P+E*b,e[2]=M*R+w*P+v*b,e[3]=y*R+$*P+A*b,e[4]=m*L+S*F+z*I,e[5]=d*L+x*F+E*I,e[6]=M*L+w*F+v*I,e[7]=y*L+$*F+A*I,e[8]=m*O+S*T+z*B,e[9]=d*O+x*T+E*B,e[10]=M*O+w*T+v*B,e[11]=y*O+$*T+A*B,r!==e&&(e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e)}function V(e,r,n){let t=Math.sin(n),i=Math.cos(n),l=r[4],s=r[5],c=r[6],h=r[7],a=r[8],f=r[9],m=r[10],d=r[11];return r!==e&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[4]=l*i+a*t,e[5]=s*i+f*t,e[6]=c*i+m*t,e[7]=h*i+d*t,e[8]=a*i-l*t,e[9]=f*i-s*t,e[10]=m*i-c*t,e[11]=d*i-h*t,e}function H(e,r,n){let t=Math.sin(n),i=Math.cos(n),l=r[0],s=r[1],c=r[2],h=r[3],a=r[8],f=r[9],m=r[10],d=r[11];return r!==e&&(e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=l*i-a*t,e[1]=s*i-f*t,e[2]=c*i-m*t,e[3]=h*i-d*t,e[8]=l*t+a*i,e[9]=s*t+f*i,e[10]=c*t+m*i,e[11]=h*t+d*i,e}function q(e,r,n){let t=Math.sin(n),i=Math.cos(n),l=r[0],s=r[1],c=r[2],h=r[3],a=r[4],f=r[5],m=r[6],d=r[7];return r!==e&&(e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15]),e[0]=l*i+a*t,e[1]=s*i+f*t,e[2]=c*i+m*t,e[3]=h*i+d*t,e[4]=a*i-l*t,e[5]=f*i-s*t,e[6]=m*i-c*t,e[7]=d*i-h*t,e}function A1(e,r){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function v1(e,r){return e[0]=r[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=r[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function P1(e,r,n){let t=n[0],i=n[1],l=n[2],s=Math.hypot(t,i,l),c,h,a;return s<1e-6?null:(s=1/s,t*=s,i*=s,l*=s,c=Math.sin(r),h=Math.cos(r),a=1-h,e[0]=t*t*a+h,e[1]=i*t*a+l*c,e[2]=l*t*a-i*c,e[3]=0,e[4]=t*i*a-l*c,e[5]=i*i*a+h,e[6]=l*i*a+t*c,e[7]=0,e[8]=t*l*a+i*c,e[9]=i*l*a-t*c,e[10]=l*l*a+h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function $1(e,r){let n=Math.sin(r),t=Math.cos(r);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function L1(e,r){let n=Math.sin(r),t=Math.cos(r);return e[0]=t,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function T1(e,r){let n=Math.sin(r),t=Math.cos(r);return e[0]=t,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fe(e,r,n){let t=r[0],i=r[1],l=r[2],s=r[3],c=t+t,h=i+i,a=l+l,f=t*c,m=t*h,d=t*a,M=i*h,y=i*a,S=l*a,x=s*c,w=s*h,$=s*a;return e[0]=1-(M+S),e[1]=m+$,e[2]=d-w,e[3]=0,e[4]=m-$,e[5]=1-(f+S),e[6]=y+x,e[7]=0,e[8]=d+w,e[9]=y-x,e[10]=1-(f+M),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function R1(e,r){let n=new C(3),t=-r[0],i=-r[1],l=-r[2],s=r[3],c=r[4],h=r[5],a=r[6],f=r[7],m=t*t+i*i+l*l+s*s;return m>0?(n[0]=(c*s+f*t+h*l-a*i)*2/m,n[1]=(h*s+f*i+a*t-c*l)*2/m,n[2]=(a*s+f*l+c*i-h*t)*2/m):(n[0]=(c*s+f*t+h*l-a*i)*2,n[1]=(h*s+f*i+a*t-c*l)*2,n[2]=(a*s+f*l+c*i-h*t)*2),fe(e,r,n),e}function b1(e,r){return e[0]=r[12],e[1]=r[13],e[2]=r[14],e}function me(e,r){let n=r[0],t=r[1],i=r[2],l=r[4],s=r[5],c=r[6],h=r[8],a=r[9],f=r[10];return e[0]=Math.hypot(n,t,i),e[1]=Math.hypot(l,s,c),e[2]=Math.hypot(h,a,f),e}function I1(e,r){let n=new C(3);me(n,r);let t=1/n[0],i=1/n[1],l=1/n[2],s=r[0]*t,c=r[1]*i,h=r[2]*l,a=r[4]*t,f=r[5]*i,m=r[6]*l,d=r[8]*t,M=r[9]*i,y=r[10]*l,S=s+f+y,x=0;return S>0?(x=Math.sqrt(S+1)*2,e[3]=.25*x,e[0]=(m-M)/x,e[1]=(d-h)/x,e[2]=(c-a)/x):s>f&&s>y?(x=Math.sqrt(1+s-f-y)*2,e[3]=(m-M)/x,e[0]=.25*x,e[1]=(c+a)/x,e[2]=(d+h)/x):f>y?(x=Math.sqrt(1+f-s-y)*2,e[3]=(d-h)/x,e[0]=(c+a)/x,e[1]=.25*x,e[2]=(m+M)/x):(x=Math.sqrt(1+y-s-f)*2,e[3]=(c-a)/x,e[0]=(d+h)/x,e[1]=(m+M)/x,e[2]=.25*x),e}function O1(e,r,n,t){r[0]=t[12],r[1]=t[13],r[2]=t[14];let i=t[0],l=t[1],s=t[2],c=t[4],h=t[5],a=t[6],f=t[8],m=t[9],d=t[10];n[0]=Math.hypot(i,l,s),n[1]=Math.hypot(c,h,a),n[2]=Math.hypot(f,m,d);let M=1/n[0],y=1/n[1],S=1/n[2],x=i*M,w=l*y,$=s*S,z=c*M,E=h*y,v=a*S,A=f*M,R=m*y,P=d*S,b=x+E+P,L=0;return b>0?(L=Math.sqrt(b+1)*2,e[3]=.25*L,e[0]=(v-R)/L,e[1]=(A-$)/L,e[2]=(w-z)/L):x>E&&x>P?(L=Math.sqrt(1+x-E-P)*2,e[3]=(v-R)/L,e[0]=.25*L,e[1]=(w+z)/L,e[2]=(A+$)/L):E>P?(L=Math.sqrt(1+E-x-P)*2,e[3]=(A-$)/L,e[0]=(w+z)/L,e[1]=.25*L,e[2]=(v+R)/L):(L=Math.sqrt(1+P-x-E)*2,e[3]=(w-z)/L,e[0]=(A+$)/L,e[1]=(v+R)/L,e[2]=.25*L),e}function F1(e,r,n,t){let i=r[0],l=r[1],s=r[2],c=r[3],h=i+i,a=l+l,f=s+s,m=i*h,d=i*a,M=i*f,y=l*a,S=l*f,x=s*f,w=c*h,$=c*a,z=c*f,E=t[0],v=t[1],A=t[2];return e[0]=(1-(y+x))*E,e[1]=(d+z)*E,e[2]=(M-$)*E,e[3]=0,e[4]=(d-z)*v,e[5]=(1-(m+x))*v,e[6]=(S+w)*v,e[7]=0,e[8]=(M+$)*A,e[9]=(S-w)*A,e[10]=(1-(m+y))*A,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function N1(e,r,n,t,i){let l=r[0],s=r[1],c=r[2],h=r[3],a=l+l,f=s+s,m=c+c,d=l*a,M=l*f,y=l*m,S=s*f,x=s*m,w=c*m,$=h*a,z=h*f,E=h*m,v=t[0],A=t[1],R=t[2],P=i[0],b=i[1],L=i[2],F=(1-(S+w))*v,I=(M+E)*v,O=(y-z)*v,T=(M-E)*A,B=(1-(d+w))*A,X=(x+$)*A,k=(y+z)*R,ee=(x-$)*R,re=(1-(d+S))*R;return e[0]=F,e[1]=I,e[2]=O,e[3]=0,e[4]=T,e[5]=B,e[6]=X,e[7]=0,e[8]=k,e[9]=ee,e[10]=re,e[11]=0,e[12]=n[0]+P-(F*P+T*b+k*L),e[13]=n[1]+b-(I*P+B*b+ee*L),e[14]=n[2]+L-(O*P+X*b+re*L),e[15]=1,e}function C1(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=n+n,c=t+t,h=i+i,a=n*s,f=t*s,m=t*c,d=i*s,M=i*c,y=i*h,S=l*s,x=l*c,w=l*h;return e[0]=1-m-y,e[1]=f+w,e[2]=d-x,e[3]=0,e[4]=f-w,e[5]=1-a-y,e[6]=M+S,e[7]=0,e[8]=d+x,e[9]=M-S,e[10]=1-a-m,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _1(e,r,n,t,i,l,s){let c=1/(n-r),h=1/(i-t),a=1/(l-s);return e[0]=l*2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l*2*h,e[6]=0,e[7]=0,e[8]=(n+r)*c,e[9]=(i+t)*h,e[10]=(s+l)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*l*2*a,e[15]=0,e}function Me(e,r,n,t,i){const l=1/Math.tan(r/2);if(e[0]=l/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){const s=1/(t-i);e[10]=(i+t)*s,e[14]=2*i*t*s}else e[10]=-1,e[14]=-2*t;return e}const de=Me;function o1(e,r,n,t,i){const l=1/Math.tan(r/2);if(e[0]=l/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0){const s=1/(t-i);e[10]=i*s,e[14]=i*t*s}else e[10]=-1,e[14]=-t;return e}function U1(e,r,n,t){let i=Math.tan(r.upDegrees*Math.PI/180),l=Math.tan(r.downDegrees*Math.PI/180),s=Math.tan(r.leftDegrees*Math.PI/180),c=Math.tan(r.rightDegrees*Math.PI/180),h=2/(s+c),a=2/(i+l);return e[0]=h,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=-((s-c)*h*.5),e[9]=(i-l)*a*.5,e[10]=t/(n-t),e[11]=-1,e[12]=0,e[13]=0,e[14]=t*n/(n-t),e[15]=0,e}function xe(e,r,n,t,i,l,s){const c=1/(r-n),h=1/(t-i),a=1/(l-s);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*a,e[11]=0,e[12]=(r+n)*c,e[13]=(i+t)*h,e[14]=(s+l)*a,e[15]=1,e}const B1=xe;function q1(e,r,n,t,i,l,s){const c=1/(r-n),h=1/(t-i),a=1/(l-s);return e[0]=-2*c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*h,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=a,e[11]=0,e[12]=(r+n)*c,e[13]=(i+t)*h,e[14]=l*a,e[15]=1,e}function j1(e,r,n,t){let i,l,s,c,h,a,f,m,d,M,y=r[0],S=r[1],x=r[2],w=t[0],$=t[1],z=t[2],E=n[0],v=n[1],A=n[2];return Math.abs(y-E)<1e-6&&Math.abs(S-v)<1e-6&&Math.abs(x-A)<1e-6?he(e):(f=y-E,m=S-v,d=x-A,M=1/Math.hypot(f,m,d),f*=M,m*=M,d*=M,i=$*d-z*m,l=z*f-w*d,s=w*m-$*f,M=Math.hypot(i,l,s),M?(M=1/M,i*=M,l*=M,s*=M):(i=0,l=0,s=0),c=m*s-d*l,h=d*i-f*s,a=f*l-m*i,M=Math.hypot(c,h,a),M?(M=1/M,c*=M,h*=M,a*=M):(c=0,h=0,a=0),e[0]=i,e[1]=c,e[2]=f,e[3]=0,e[4]=l,e[5]=h,e[6]=m,e[7]=0,e[8]=s,e[9]=a,e[10]=d,e[11]=0,e[12]=-(i*y+l*S+s*x),e[13]=-(c*y+h*S+a*x),e[14]=-(f*y+m*S+d*x),e[15]=1,e)}function X1(e,r,n,t){let i=r[0],l=r[1],s=r[2],c=t[0],h=t[1],a=t[2],f=i-n[0],m=l-n[1],d=s-n[2],M=f*f+m*m+d*d;M>0&&(M=1/Math.sqrt(M),f*=M,m*=M,d*=M);let y=h*d-a*m,S=a*f-c*d,x=c*m-h*f;return M=y*y+S*S+x*x,M>0&&(M=1/Math.sqrt(M),y*=M,S*=M,x*=M),e[0]=y,e[1]=S,e[2]=x,e[3]=0,e[4]=m*x-d*S,e[5]=d*y-f*x,e[6]=f*S-m*y,e[7]=0,e[8]=f,e[9]=m,e[10]=d,e[11]=0,e[12]=i,e[13]=l,e[14]=s,e[15]=1,e}function k1(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Y1(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function V1(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e[4]=r[4]+n[4],e[5]=r[5]+n[5],e[6]=r[6]+n[6],e[7]=r[7]+n[7],e[8]=r[8]+n[8],e[9]=r[9]+n[9],e[10]=r[10]+n[10],e[11]=r[11]+n[11],e[12]=r[12]+n[12],e[13]=r[13]+n[13],e[14]=r[14]+n[14],e[15]=r[15]+n[15],e}function ye(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e[4]=r[4]-n[4],e[5]=r[5]-n[5],e[6]=r[6]-n[6],e[7]=r[7]-n[7],e[8]=r[8]-n[8],e[9]=r[9]-n[9],e[10]=r[10]-n[10],e[11]=r[11]-n[11],e[12]=r[12]-n[12],e[13]=r[13]-n[13],e[14]=r[14]-n[14],e[15]=r[15]-n[15],e}function D1(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e[4]=r[4]*n,e[5]=r[5]*n,e[6]=r[6]*n,e[7]=r[7]*n,e[8]=r[8]*n,e[9]=r[9]*n,e[10]=r[10]*n,e[11]=r[11]*n,e[12]=r[12]*n,e[13]=r[13]*n,e[14]=r[14]*n,e[15]=r[15]*n,e}function G1(e,r,n,t){return e[0]=r[0]+n[0]*t,e[1]=r[1]+n[1]*t,e[2]=r[2]+n[2]*t,e[3]=r[3]+n[3]*t,e[4]=r[4]+n[4]*t,e[5]=r[5]+n[5]*t,e[6]=r[6]+n[6]*t,e[7]=r[7]+n[7]*t,e[8]=r[8]+n[8]*t,e[9]=r[9]+n[9]*t,e[10]=r[10]+n[10]*t,e[11]=r[11]+n[11]*t,e[12]=r[12]+n[12]*t,e[13]=r[13]+n[13]*t,e[14]=r[14]+n[14]*t,e[15]=r[15]+n[15]*t,e}function H1(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]&&e[4]===r[4]&&e[5]===r[5]&&e[6]===r[6]&&e[7]===r[7]&&e[8]===r[8]&&e[9]===r[9]&&e[10]===r[10]&&e[11]===r[11]&&e[12]===r[12]&&e[13]===r[13]&&e[14]===r[14]&&e[15]===r[15]}function Z1(e,r){let n=e[0],t=e[1],i=e[2],l=e[3],s=e[4],c=e[5],h=e[6],a=e[7],f=e[8],m=e[9],d=e[10],M=e[11],y=e[12],S=e[13],x=e[14],w=e[15],$=r[0],z=r[1],E=r[2],v=r[3],A=r[4],R=r[5],P=r[6],b=r[7],L=r[8],F=r[9],I=r[10],O=r[11],T=r[12],B=r[13],X=r[14],k=r[15];return Math.abs(n-$)<=1e-6*Math.max(1,Math.abs(n),Math.abs($))&&Math.abs(t-z)<=1e-6*Math.max(1,Math.abs(t),Math.abs(z))&&Math.abs(i-E)<=1e-6*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(l-v)<=1e-6*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(s-A)<=1e-6*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(c-R)<=1e-6*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(h-P)<=1e-6*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(a-b)<=1e-6*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(f-L)<=1e-6*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(m-F)<=1e-6*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(d-I)<=1e-6*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(M-O)<=1e-6*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(y-T)<=1e-6*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(S-B)<=1e-6*Math.max(1,Math.abs(S),Math.abs(B))&&Math.abs(x-X)<=1e-6*Math.max(1,Math.abs(x),Math.abs(X))&&Math.abs(w-k)<=1e-6*Math.max(1,Math.abs(w),Math.abs(k))}const Q1=ae,W1=ye,J1=Object.freeze(Object.defineProperty({__proto__:null,add:V1,adjoint:w1,clone:Y,copy:d1,create:K,decompose:O1,determinant:E1,equals:Z1,exactEquals:H1,frob:Y1,fromQuat:C1,fromQuat2:R1,fromRotation:P1,fromRotationTranslation:fe,fromRotationTranslationScale:F1,fromRotationTranslationScaleOrigin:N1,fromScaling:v1,fromTranslation:A1,fromValues:x1,fromXRotation:$1,fromYRotation:L1,fromZRotation:T1,frustum:_1,getRotation:I1,getScaling:me,getTranslation:b1,identity:he,invert:p1,lookAt:j1,mul:Q1,multiply:ae,multiplyScalar:D1,multiplyScalarAndAdd:G1,ortho:B1,orthoNO:xe,orthoZO:q1,perspective:de,perspectiveFromFieldOfView:U1,perspectiveNO:Me,perspectiveZO:o1,rotate:z1,rotateX:V,rotateY:H,rotateZ:q,scale:g,set:y1,str:k1,sub:W1,subtract:ye,targetTo:X1,translate:U,transpose:S1},Symbol.toStringTag,{value:"Module"}));function u(){let e=new C(3);return C!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function K1(e){var r=new C(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function Se(e){let r=e[0],n=e[1],t=e[2];return Math.hypot(r,n,t)}function J(e,r,n){let t=new C(3);return t[0]=e,t[1]=r,t[2]=n,t}function g1(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function u1(e,r,n,t){return e[0]=r,e[1]=n,e[2]=t,e}function er(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function pe(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e}function we(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e}function Ee(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e}function rr(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e}function nr(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e}function tr(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e}function ir(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e}function lr(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e}function sr(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e}function cr(e,r,n,t){return e[0]=r[0]+n[0]*t,e[1]=r[1]+n[1]*t,e[2]=r[2]+n[2]*t,e}function ze(e,r){let n=r[0]-e[0],t=r[1]-e[1],i=r[2]-e[2];return Math.hypot(n,t,i)}function Ae(e,r){let n=r[0]-e[0],t=r[1]-e[1],i=r[2]-e[2];return n*n+t*t+i*i}function ve(e){let r=e[0],n=e[1],t=e[2];return r*r+n*n+t*t}function hr(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e}function ar(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e}function Pe(e,r){let n=r[0],t=r[1],i=r[2],l=n*n+t*t+i*i;return l>0&&(l=1/Math.sqrt(l)),e[0]=r[0]*l,e[1]=r[1]*l,e[2]=r[2]*l,e}function Z(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]}function G(e,r,n){let t=r[0],i=r[1],l=r[2],s=n[0],c=n[1],h=n[2];return e[0]=i*h-l*c,e[1]=l*s-t*h,e[2]=t*c-i*s,e}function fr(e,r,n,t){let i=r[0],l=r[1],s=r[2];return e[0]=i+t*(n[0]-i),e[1]=l+t*(n[1]-l),e[2]=s+t*(n[2]-s),e}function mr(e,r,n,t){let i=Math.acos(Math.min(Math.max(Z(r,n),-1),1)),l=Math.sin(i),s=Math.sin((1-t)*i)/l,c=Math.sin(t*i)/l;return e[0]=s*r[0]+c*n[0],e[1]=s*r[1]+c*n[1],e[2]=s*r[2]+c*n[2],e}function Mr(e,r,n,t,i,l){let s=l*l,c=s*(2*l-3)+1,h=s*(l-2)+l,a=s*(l-1),f=s*(3-2*l);return e[0]=r[0]*c+n[0]*h+t[0]*a+i[0]*f,e[1]=r[1]*c+n[1]*h+t[1]*a+i[1]*f,e[2]=r[2]*c+n[2]*h+t[2]*a+i[2]*f,e}function dr(e,r,n,t,i,l){let s=1-l,c=s*s,h=l*l,a=c*s,f=3*l*c,m=3*h*s,d=h*l;return e[0]=r[0]*a+n[0]*f+t[0]*m+i[0]*d,e[1]=r[1]*a+n[1]*f+t[1]*m+i[1]*d,e[2]=r[2]*a+n[2]*f+t[2]*m+i[2]*d,e}function xr(e,r){r=r||1;let n=j()*2*Math.PI,t=j()*2-1,i=Math.sqrt(1-t*t)*r;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=t*r,e}function yr(e,r,n){let t=r[0],i=r[1],l=r[2],s=n[3]*t+n[7]*i+n[11]*l+n[15];return s=s||1,e[0]=(n[0]*t+n[4]*i+n[8]*l+n[12])/s,e[1]=(n[1]*t+n[5]*i+n[9]*l+n[13])/s,e[2]=(n[2]*t+n[6]*i+n[10]*l+n[14])/s,e}function Sr(e,r,n){let t=r[0],i=r[1],l=r[2];return e[0]=t*n[0]+i*n[3]+l*n[6],e[1]=t*n[1]+i*n[4]+l*n[7],e[2]=t*n[2]+i*n[5]+l*n[8],e}function pr(e,r,n){let t=n[0],i=n[1],l=n[2],s=n[3],c=r[0],h=r[1],a=r[2],f=i*a-l*h,m=l*c-t*a,d=t*h-i*c,M=i*d-l*m,y=l*f-t*d,S=t*m-i*f,x=s*2;return f*=x,m*=x,d*=x,M*=2,y*=2,S*=2,e[0]=c+f+M,e[1]=h+m+y,e[2]=a+d+S,e}function wr(e,r,n,t){let i=[],l=[];return i[0]=r[0]-n[0],i[1]=r[1]-n[1],i[2]=r[2]-n[2],l[0]=i[0],l[1]=i[1]*Math.cos(t)-i[2]*Math.sin(t),l[2]=i[1]*Math.sin(t)+i[2]*Math.cos(t),e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function Er(e,r,n,t){let i=[],l=[];return i[0]=r[0]-n[0],i[1]=r[1]-n[1],i[2]=r[2]-n[2],l[0]=i[2]*Math.sin(t)+i[0]*Math.cos(t),l[1]=i[1],l[2]=i[2]*Math.cos(t)-i[0]*Math.sin(t),e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function zr(e,r,n,t){let i=[],l=[];return i[0]=r[0]-n[0],i[1]=r[1]-n[1],i[2]=r[2]-n[2],l[0]=i[0]*Math.cos(t)-i[1]*Math.sin(t),l[1]=i[0]*Math.sin(t)+i[1]*Math.cos(t),l[2]=i[2],e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function Ar(e,r){let n=e[0],t=e[1],i=e[2],l=r[0],s=r[1],c=r[2],h=Math.sqrt((n*n+t*t+i*i)*(l*l+s*s+c*c)),a=h&&Z(e,r)/h;return Math.acos(Math.min(Math.max(a,-1),1))}function vr(e){return e[0]=0,e[1]=0,e[2]=0,e}function Pr(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function $r(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]}function Lr(e,r){let n=e[0],t=e[1],i=e[2],l=r[0],s=r[1],c=r[2];return Math.abs(n-l)<=1e-6*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(t-s)<=1e-6*Math.max(1,Math.abs(t),Math.abs(s))&&Math.abs(i-c)<=1e-6*Math.max(1,Math.abs(i),Math.abs(c))}const Tr=pe,Rr=we,br=Ee,Ir=ze,Or=Ae,$e=Se,Fr=ve,Nr=function(){let e=u();return function(r,n,t,i,l,s){let c,h;for(n||(n=3),t||(t=0),i?h=Math.min(i*n+t,r.length):h=r.length,c=t;c<h;c+=n)e[0]=r[c],e[1]=r[c+1],e[2]=r[c+2],l(e,e,s),r[c]=e[0],r[c+1]=e[1],r[c+2]=e[2];return r}}(),Cr=Object.freeze(Object.defineProperty({__proto__:null,add:er,angle:Ar,bezier:dr,ceil:rr,clone:K1,copy:g1,create:u,cross:G,dist:Ir,distance:ze,div:br,divide:Ee,dot:Z,equals:Lr,exactEquals:$r,floor:nr,forEach:Nr,fromValues:J,hermite:Mr,inverse:ar,len:$e,length:Se,lerp:fr,max:ir,min:tr,mul:Rr,multiply:we,negate:hr,normalize:Pe,random:xr,rotateX:wr,rotateY:Er,rotateZ:zr,round:lr,scale:sr,scaleAndAdd:cr,set:u1,slerp:mr,sqrDist:Or,sqrLen:Fr,squaredDistance:Ae,squaredLength:ve,str:Pr,sub:Tr,subtract:pe,transformMat3:Sr,transformMat4:yr,transformQuat:pr,zero:vr},Symbol.toStringTag,{value:"Module"}));function Le(){let e=new C(4);return C!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function _r(e){let r=new C(4);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function or(e,r,n,t){let i=new C(4);return i[0]=e,i[1]=r,i[2]=n,i[3]=t,i}function Ur(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function Br(e,r,n,t,i){return e[0]=r,e[1]=n,e[2]=t,e[3]=i,e}function qr(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e[3]=r[3]+n[3],e}function Te(e,r,n){return e[0]=r[0]-n[0],e[1]=r[1]-n[1],e[2]=r[2]-n[2],e[3]=r[3]-n[3],e}function Re(e,r,n){return e[0]=r[0]*n[0],e[1]=r[1]*n[1],e[2]=r[2]*n[2],e[3]=r[3]*n[3],e}function be(e,r,n){return e[0]=r[0]/n[0],e[1]=r[1]/n[1],e[2]=r[2]/n[2],e[3]=r[3]/n[3],e}function jr(e,r){return e[0]=Math.ceil(r[0]),e[1]=Math.ceil(r[1]),e[2]=Math.ceil(r[2]),e[3]=Math.ceil(r[3]),e}function Xr(e,r){return e[0]=Math.floor(r[0]),e[1]=Math.floor(r[1]),e[2]=Math.floor(r[2]),e[3]=Math.floor(r[3]),e}function kr(e,r,n){return e[0]=Math.min(r[0],n[0]),e[1]=Math.min(r[1],n[1]),e[2]=Math.min(r[2],n[2]),e[3]=Math.min(r[3],n[3]),e}function Yr(e,r,n){return e[0]=Math.max(r[0],n[0]),e[1]=Math.max(r[1],n[1]),e[2]=Math.max(r[2],n[2]),e[3]=Math.max(r[3],n[3]),e}function Vr(e,r){return e[0]=Math.round(r[0]),e[1]=Math.round(r[1]),e[2]=Math.round(r[2]),e[3]=Math.round(r[3]),e}function Dr(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e}function Gr(e,r,n,t){return e[0]=r[0]+n[0]*t,e[1]=r[1]+n[1]*t,e[2]=r[2]+n[2]*t,e[3]=r[3]+n[3]*t,e}function Ie(e,r){let n=r[0]-e[0],t=r[1]-e[1],i=r[2]-e[2],l=r[3]-e[3];return Math.hypot(n,t,i,l)}function Oe(e,r){let n=r[0]-e[0],t=r[1]-e[1],i=r[2]-e[2],l=r[3]-e[3];return n*n+t*t+i*i+l*l}function Fe(e){let r=e[0],n=e[1],t=e[2],i=e[3];return Math.hypot(r,n,t,i)}function Ne(e){let r=e[0],n=e[1],t=e[2],i=e[3];return r*r+n*n+t*t+i*i}function Hr(e,r){return e[0]=-r[0],e[1]=-r[1],e[2]=-r[2],e[3]=-r[3],e}function Zr(e,r){return e[0]=1/r[0],e[1]=1/r[1],e[2]=1/r[2],e[3]=1/r[3],e}function Ce(e,r){let n=r[0],t=r[1],i=r[2],l=r[3],s=n*n+t*t+i*i+l*l;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=t*s,e[2]=i*s,e[3]=l*s,e}function Qr(e,r){return e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3]}function Wr(e,r,n,t){let i=n[0]*t[1]-n[1]*t[0],l=n[0]*t[2]-n[2]*t[0],s=n[0]*t[3]-n[3]*t[0],c=n[1]*t[2]-n[2]*t[1],h=n[1]*t[3]-n[3]*t[1],a=n[2]*t[3]-n[3]*t[2],f=r[0],m=r[1],d=r[2],M=r[3];return e[0]=m*a-d*h+M*c,e[1]=-(f*a)+d*s-M*l,e[2]=f*h-m*s+M*i,e[3]=-(f*c)+m*l-d*i,e}function Jr(e,r,n,t){let i=r[0],l=r[1],s=r[2],c=r[3];return e[0]=i+t*(n[0]-i),e[1]=l+t*(n[1]-l),e[2]=s+t*(n[2]-s),e[3]=c+t*(n[3]-c),e}function Kr(e,r){r=r||1;var n,t,i,l,s,c;do{n=j()*2-1,t=j()*2-1,s=n*n+t*t}while(s>=1);do{i=j()*2-1,l=j()*2-1,c=i*i+l*l}while(c>=1);var h=Math.sqrt((1-s)/c);return e[0]=r*n,e[1]=r*t,e[2]=r*i*h,e[3]=r*l*h,e}function gr(e,r,n){let t=r[0],i=r[1],l=r[2],s=r[3];return e[0]=n[0]*t+n[4]*i+n[8]*l+n[12]*s,e[1]=n[1]*t+n[5]*i+n[9]*l+n[13]*s,e[2]=n[2]*t+n[6]*i+n[10]*l+n[14]*s,e[3]=n[3]*t+n[7]*i+n[11]*l+n[15]*s,e}function ur(e,r,n){let t=r[0],i=r[1],l=r[2],s=n[0],c=n[1],h=n[2],a=n[3],f=a*t+c*l-h*i,m=a*i+h*t-s*l,d=a*l+s*i-c*t,M=-s*t-c*i-h*l;return e[0]=f*a+M*-s+m*-h-d*-c,e[1]=m*a+M*-c+d*-s-f*-h,e[2]=d*a+M*-h+f*-c-m*-s,e[3]=r[3],e}function en(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function rn(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function nn(e,r){return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3]===r[3]}function tn(e,r){let n=e[0],t=e[1],i=e[2],l=e[3],s=r[0],c=r[1],h=r[2],a=r[3];return Math.abs(n-s)<=1e-6*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(t-c)<=1e-6*Math.max(1,Math.abs(t),Math.abs(c))&&Math.abs(i-h)<=1e-6*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(l-a)<=1e-6*Math.max(1,Math.abs(l),Math.abs(a))}const ln=Te,sn=Re,cn=be,hn=Ie,an=Oe,fn=Fe,mn=Ne,Mn=function(){let e=Le();return function(r,n,t,i,l,s){let c,h;for(n||(n=4),t||(t=0),i?h=Math.min(i*n+t,r.length):h=r.length,c=t;c<h;c+=n)e[0]=r[c],e[1]=r[c+1],e[2]=r[c+2],e[3]=r[c+3],l(e,e,s),r[c]=e[0],r[c+1]=e[1],r[c+2]=e[2],r[c+3]=e[3];return r}}(),dn=Object.freeze(Object.defineProperty({__proto__:null,add:qr,ceil:jr,clone:_r,copy:Ur,create:Le,cross:Wr,dist:hn,distance:Ie,div:cn,divide:be,dot:Qr,equals:tn,exactEquals:nn,floor:Xr,forEach:Mn,fromValues:or,inverse:Zr,len:fn,length:Fe,lerp:Jr,max:Yr,min:kr,mul:sn,multiply:Re,negate:Hr,normalize:Ce,random:Kr,round:Vr,scale:Dr,scaleAndAdd:Gr,set:Br,sqrDist:an,sqrLen:mn,squaredDistance:Oe,squaredLength:Ne,str:rn,sub:ln,subtract:Te,transformMat4:gr,transformQuat:ur,zero:en},Symbol.toStringTag,{value:"Module"}));function ne(){let e=new C(4);return C!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function xn(e,r,n){n=n*.5;let t=Math.sin(n);return e[0]=t*r[0],e[1]=t*r[1],e[2]=t*r[2],e[3]=Math.cos(n),e}function W(e,r,n,t){let i=r[0],l=r[1],s=r[2],c=r[3],h=n[0],a=n[1],f=n[2],m=n[3],d,M,y,S,x;return M=i*h+l*a+s*f+c*m,M<0&&(M=-M,h=-h,a=-a,f=-f,m=-m),1-M>1e-6?(d=Math.acos(M),y=Math.sin(d),S=Math.sin((1-t)*d)/y,x=Math.sin(t*d)/y):(S=1-t,x=t),e[0]=S*i+x*h,e[1]=S*l+x*a,e[2]=S*s+x*f,e[3]=S*c+x*m,e}function yn(e,r){let n=r[0]+r[4]+r[8],t;if(n>0)t=Math.sqrt(n+1),e[3]=.5*t,t=.5/t,e[0]=(r[5]-r[7])*t,e[1]=(r[6]-r[2])*t,e[2]=(r[1]-r[3])*t;else{let i=0;r[4]>r[0]&&(i=1),r[8]>r[i*3+i]&&(i=2);let l=(i+1)%3,s=(i+2)%3;t=Math.sqrt(r[i*3+i]-r[l*3+l]-r[s*3+s]+1),e[i]=.5*t,t=.5/t,e[3]=(r[l*3+s]-r[s*3+l])*t,e[l]=(r[l*3+i]+r[i*3+l])*t,e[s]=(r[s*3+i]+r[i*3+s])*t}return e}const _e=Ce;(function(){let e=u(),r=J(1,0,0),n=J(0,1,0);return function(t,i,l){let s=Z(i,l);return s<-.999999?(G(e,r,i),$e(e)<1e-6&&G(e,n,i),Pe(e,e),xn(t,e,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(G(e,i,l),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1+s,_e(t,t))}})();(function(){let e=ne(),r=ne();return function(n,t,i,l,s,c){return W(e,t,s,c),W(r,i,l,c),W(n,e,r,2*c*(1-c)),n}})();(function(){let e=le();return function(r,n,t,i){return e[0]=t[0],e[3]=t[1],e[6]=t[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],_e(r,yn(r,e))}})();function Sn(){let e=new C(2);return C!=Float32Array&&(e[0]=0,e[1]=0),e}(function(){let e=Sn();return function(r,n,t,i,l,s){let c,h;for(n||(n=2),t||(t=0),i?h=Math.min(i*n+t,r.length):h=r.length,c=t;c<h;c+=n)e[0]=r[c],e[1]=r[c+1],l(e,e,s),r[c]=e[0],r[c+1]=e[1];return r}})();const oe=e=>{const r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r);const n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,640,480,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.bindFramebuffer(e.FRAMEBUFFER,null),{fbo:r,texture:n,bind(t){t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.viewport(0,0,640,480)},release(t){t.bindFramebuffer(t.FRAMEBUFFER,null)},bindTexture(t){t.bindTexture(t.TEXTURE_2D,this.texture)}}},N=(e,r,n,t,i)=>{t=t||e.FLOAT,i=i||Float32Array;let l=r;l.constructor===Array&&(l=new i(r));const s=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),{buffer:s,bufferDesc:n,count:r.length/n.stride,draw(c,h){h=h!=null?h:c.TRIANGLES,c.bindBuffer(c.ARRAY_BUFFER,this.buffer);for(const{position:a,size:f,offset:m}of this.bufferDesc.attributes)c.enableVertexAttribArray(a),c.vertexAttribPointer(a,f,t,!1,this.bufferDesc.stride*i.BYTES_PER_ELEMENT,m*i.BYTES_PER_ELEMENT);c.drawArrays(h,0,this.count),c.bindBuffer(c.ARRAY_BUFFER,null)}}},Q=(e,r,n)=>{const t=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))throw new Error(`ERROR compiling vertex shader: ${e.getShaderInfoLog(t)}`);const i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error(`ERROR compiling fragment shader: ${e.getShaderInfoLog(i)}`);const l=e.createProgram();if(e.attachShader(l,t),e.attachShader(l,i),e.linkProgram(l),!e.getProgramParameter(l,e.LINK_STATUS))throw new Error(`ERROR linking shader program: ${e.getShaderInfoLog(l)}`);return e.deleteShader(t),e.deleteShader(i),{program:l,attributeLocations:{},uniformLocations:{},useProgram(s){s.useProgram(this.program)},getAttribLocation(s,c){return this.attributeLocations[c]||(this.attributeLocations[c]=s.getAttribLocation(this.program,c)),this.attributeLocations[c]},getUniformLocation(s,c){return this.uniformLocations[c]||(this.uniformLocations[c]=s.getUniformLocation(this.program,c)),this.uniformLocations[c]},enableVertexAttribArray(s,c){s.enableVertexAttribArray(this.getAttribLocation(s,c))},vertexAttribPointer(s,c,h,a,f,m,d){s.vertexAttribPointer(this.getAttribLocation(s,c),h,a,f,m,d)},uniformMatrix4fv(s,c,h,a){a.constructor===Array&&(a=new Float32Array(a)),s.uniformMatrix4fv(this.getUniformLocation(s,c),h,a)},uniform3fv(s,c,h){h.constructor===Array&&(h=new Float32Array(h)),s.uniform3fv(this.getUniformLocation(s,c),h)},uniform1f(s,c,h){h.constructor===Array&&(h=new Float32Array(h)),s.uniform1f(this.getUniformLocation(s,c),h)}}},pn=`precision mediump float;attribute vec3 aVertexCoord;attribute vec3 aVertexNormal;const vec3 diffuse = vec3(1.0);const vec3 lightDir = vec3(0.0, 0.0, 1.0);uniform mat4 projection;uniform mat4 modelView;struct Material {vec3 ambient;vec3 diffuse;};uniform Material material;varying lowp vec3 vertexColor;mat3 transpose(mat3 inMatrix) {vec3 i0 = inMatrix[0];vec3 i1 = inMatrix[1];vec3 i2 = inMatrix[2];mat3 outMatrix = mat3(vec3(i0.x, i1.x, i2.x),vec3(i0.y, i1.y, i2.y),vec3(i0.z, i1.z, i2.z));return outMatrix;}float det(mat2 matrix) {return matrix[0].x * matrix[1].y - matrix[0].y * matrix[1].x;}mat3 inverse(mat3 matrix) {vec3 row0 = matrix[0];vec3 row1 = matrix[1];vec3 row2 = matrix[2];vec3 minors0 = vec3(det(mat2(row1.y, row1.z, row2.y, row2.z)),det(mat2(row1.z, row1.x, row2.z, row2.x)),det(mat2(row1.x, row1.y, row2.x, row2.y)));vec3 minors1 = vec3(det(mat2(row2.y, row2.z, row0.y, row0.z)),det(mat2(row2.z, row2.x, row0.z, row0.x)),det(mat2(row2.x, row2.y, row0.x, row0.y)));vec3 minors2 = vec3(det(mat2(row0.y, row0.z, row1.y, row1.z)),det(mat2(row0.z, row0.x, row1.z, row1.x)),det(mat2(row0.x, row0.y, row1.x, row1.y)));mat3 adj = transpose(mat3(minors0, minors1, minors2));return (1.0 / dot(row0, minors0)) * adj;}void main() {vec3 fragPos = vec3(modelView * vec4(aVertexCoord, 1.0));vec3 normal = normalize(transpose(inverse(mat3(modelView))) * aVertexNormal);float diff = max(dot(normal, lightDir), 0.0);vertexColor = material.ambient + (diffuse * material.diffuse * diff);gl_Position = projection * vec4(fragPos, 1.0);}`,wn=`precision mediump float;varying lowp vec3 vertexColor;void main() {gl_FragColor = vec4(vertexColor, 1.0);}`,En=e=>Q(e,pn,wn),zn=`precision mediump float;attribute vec3 aVertexCoord;uniform mat4 projection;uniform mat4 modelView;void main() {gl_Position = projection * modelView * vec4(aVertexCoord, 1.0);}`,An=`precision mediump float;uniform vec3 color;void main() {gl_FragColor = vec4(color, 1.0);}`,vn=e=>Q(e,zn,An),Pn=`precision mediump float;attribute vec3 aVertexCoord;attribute vec2 aUVCoord;uniform mat4 projection;uniform mat4 modelView;varying lowp vec2 uvCoord;void main() {uvCoord = aUVCoord;gl_Position = projection * modelView * vec4(aVertexCoord, 1.0);}`,$n=`precision mediump float;varying lowp vec2 uvCoord;uniform sampler2D tex;void main() {gl_FragColor = texture2D(tex, uvCoord);}`,Ln=e=>Q(e,Pn,$n),Tn=e=>(e=e!=null?e:{translate:[0,25,75],rotation:[10,0,0]},{...e,toMatrix(r){U(r,r,this.translate.map(n=>-n)),V(r,r,o(this.rotation[0])),H(r,r,o(this.rotation[1])),q(r,r,o(this.rotation[2]))},reset(){this.translate=[0,25,75],this.rotation=[10,0,0]}}),Rn=e=>e!=null?e:{rotationX:0,rotationY:0,rotationZ:0},te=e=>(e=e!=null?e:{rotation:[0,-90,0,0,0]},{...e,reset(){this.rotation=[0,-90,0,0,0]}}),On=e=>{var r,n;return{webgl:(r=e==null?void 0:e.webgl)!=null?r:{clearColor:[0,0,0,0]},entityStatus:Tn(e==null?void 0:e.entityStatus),headStatus:Rn(e==null?void 0:e.headStatus),armStatus:{left:te(e==null?void 0:e.armStatus.left),right:te(e==null?void 0:e.armStatus.right)},colorTimer:(n=e==null?void 0:e.colorTimer)!=null?n:{status:"blue",blinkDuration:500}}},bn=(e,r,n,t,i)=>{const{wheelMesh:l,monitorMesh:s,monitorIntake:c,chestBoxMesh:h,chestPlateMesh:a,powerMesh:f,powerPinMesh:m,abdomenMesh:d,waistMesh:M,shoulderConnectorMesh:y,shoulderPlateMesh:S,bigArmMesh:x,bigArmCoverMesh:w,bigArmConnectorMesh:$,smallArmMesh:z,smallArmCoverMesh:E,wheelSmallMesh:v,clawMesh:A,clawCoverMesh:R}=n,P={stride:6,attributes:[{position:t,size:3,offset:0},{position:i,size:3,offset:3}]};r.wheel=N(e,l,P),r.monitor=N(e,s,P),r.monitorIntake=N(e,c,P),r.chestBox=N(e,h,P),r.chestPlate=N(e,a,P),r.power=N(e,f,P),r.powerPin=N(e,m,P),r.abdomen=N(e,d,P),r.waist=N(e,M,P),r.shoulderConnector=N(e,y,P),r.shoulderPlate=N(e,S,P),r.bigArm=N(e,x,P),r.bigArmCover=N(e,w,P),r.bigArmConnector=N(e,$,P),r.smallArm=N(e,z,P),r.smallArmCover=N(e,E,P),r.wheelSmall=N(e,v,P),r.claw=N(e,A,P),r.clawCover=N(e,R,P)},In=(e,r,n,t)=>{const{colorTimerMesh:i}=n,l={stride:6,attributes:[{position:t,size:3,offset:0}]};r.colorTimer=N(e,i,l)},D=(e,r)=>({ambient:e,diffuse:r,apply(n,t){t.uniform3fv(n,"material.ambient",e),t.uniform3fv(n,"material.diffuse",r)}}),_={plastic:D([.2,.2,.2],[.55,.55,.55]),blackPlastic:D([.15,.15,.15],[.25,.25,.25]),chrome:D([.25,.25,.25],[.4,.4,.4]),brass:D([.329412,.223529,.027451],[.780392,.568627,.113725])},p={initialized:!1,mesh:{},screenRenderer:null},Fn=(e,r)=>{e.enable(e.DEPTH_TEST),e.enable(e.BLEND),e.enable(e.CULL_FACE),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),p.commonShader=En(e),p.flatShader=vn(e),p.texturedShader=Ln(e);{const n=p.commonShader.getAttribLocation(e,"aVertexCoord"),t=p.commonShader.getAttribLocation(e,"aVertexNormal");bn(e,p.mesh,r,n,t)}{const n=p.flatShader.getAttribLocation(e,"aVertexCoord");In(e,p.mesh,r,n)}{const n=p.texturedShader.getAttribLocation(e,"aVertexCoord"),t=p.texturedShader.getAttribLocation(e,"aUVCoord");p.mesh.screen=N(e,[-12.5,18.75/2,0,0,1,12.5,-18.75/2,0,1,0,12.5,18.75/2,0,1,1,-12.5,18.75/2,0,0,1,-12.5,-18.75/2,0,0,0,12.5,-18.75/2,0,1,0],{stride:5,attributes:[{position:n,size:3,offset:0},{position:t,size:2,offset:3}]})}p.screenFrameBuffer=oe(e),p.startTime=Date.now(),p.initialized=!0},Nn=(e,r,n)=>{p.w=r,p.h=n;const t=K();de(t,45,r/n,.1,100),p.commonShader.useProgram(e),p.commonShader.uniformMatrix4fv(e,"projection",!1,t),p.flatShader.useProgram(e),p.flatShader.uniformMatrix4fv(e,"projection",!1,t),p.texturedShader.useProgram(e),p.texturedShader.uniformMatrix4fv(e,"projection",!1,t)},Cn=(e,r)=>{const{status:n}=r;if(p.screenFrameBuffer.bind(e),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),p.screenRenderer&&p.screenRenderer(e),p.screenFrameBuffer.release(e),e.viewport(0,0,p.w,p.h),e.clearColor(...n.webgl.clearColor),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),!p.initialized)return;p.commonShader.useProgram(e);const t=K();g(t,t,[.01,.01,.01]),n.entityStatus.toMatrix(t),U(t,t,[0,-12,0]);for(let c=0;c<10;c++)p.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.plastic.apply(e,p.commonShader),p.mesh.waist.draw(e),U(t,t,[0,1,0]),q(t,t,o(n.headStatus.rotationZ/10)),V(t,t,o(n.headStatus.rotationX/10)),p.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.blackPlastic.apply(e,p.commonShader),p.mesh.abdomen.draw(e),U(t,t,[0,1,0]);U(t,t,[0,6,0]);const i=Y(t);p.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.plastic.apply(e,p.commonShader),p.mesh.chestBox.draw(e),_.chrome.apply(e,p.commonShader),p.mesh.chestPlate.draw(e),_.blackPlastic.apply(e,p.commonShader),p.mesh.power.draw(e),_.brass.apply(e,p.commonShader),p.mesh.powerPin.draw(e);const l={},s={};if(ie(e,t,n.armStatus.right,1,l),ie(e,t,n.armStatus.left,-1,s),U(t,t,[0,12.875,0]),H(t,t,o(n.headStatus.rotationY/2)),p.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.chrome.apply(e,p.commonShader),p.mesh.wheel.draw(e),H(t,t,o(n.headStatus.rotationY/2)),U(t,t,[0,.375,0]),p.commonShader.uniformMatrix4fv(e,"modelView",!1,t),_.plastic.apply(e,p.commonShader),p.mesh.monitor.draw(e),_.chrome.apply(e,p.commonShader),p.mesh.monitorIntake.draw(e),U(t,t,[0,9.25+1.875,5.25]),p.texturedShader.useProgram(e),p.texturedShader.uniformMatrix4fv(e,"modelView",!1,t),p.screenFrameBuffer.bindTexture(e),p.mesh.screen.draw(e),p.flatShader.useProgram(e),p.flatShader.uniformMatrix4fv(e,"modelView",!1,i),n.colorTimer.status==="blue")p.flatShader.uniform3fv(e,"color",[.25,1,1]);else if(n.colorTimer.status==="blink"){const c=Date.now()-p.startTime;Math.floor(c/n.colorTimer.blinkDuration)%2===0?p.flatShader.uniform3fv(e,"color",[1,.25,.25]):p.flatShader.uniform3fv(e,"color",[.4,.4,.4])}else p.flatShader.uniform3fv(e,"color",[.4,.4,.4]);p.mesh.colorTimer.draw(e)},_n=e=>{p.screenRenderer=e},ie=(e,r,n,t,i)=>{r=Y(r),g(r,r,[t,1,t]),U(r,r,[14.5,7.5,0]),V(r,r,o(t*n.rotation[0])),p.commonShader.uniformMatrix4fv(e,"modelView",!1,r),_.plastic.apply(e,p.commonShader),p.mesh.shoulderConnector.draw(e),_.chrome.apply(e,p.commonShader),p.mesh.shoulderPlate.draw(e),U(r,r,[4.75,0,0]),q(r,r,o(n.rotation[1]/2)),p.commonShader.uniformMatrix4fv(e,"modelView",!1,r),_.blackPlastic.apply(e,p.commonShader),p.mesh.wheelSmall.draw(e),q(r,r,o(n.rotation[1]/2)),p.commonShader.uniformMatrix4fv(e,"modelView",!1,r),i.bigArm=Y(r),_.chrome.apply(e,p.commonShader),p.mesh.bigArm.draw(e),_.plastic.apply(e,p.commonShader),p.mesh.bigArmCover.draw(e),U(r,r,[20,0,0]),V(r,r,o(-1*n.rotation[2])),p.commonShader.uniformMatrix4fv(e,"modelView",!1,r),_.blackPlastic.apply(e,p.commonShader),p.mesh.bigArmConnector.draw(e),U(r,r,[4.5,0,0]),q(r,r,o(t*n.rotation[3]/2)),p.commonShader.uniformMatrix4fv(e,"modelView",!1,r),p.mesh.wheelSmall.draw(e),q(r,r,o(t*n.rotation[3]/2)),p.commonShader.uniformMatrix4fv(e,"modelView",!1,r),i.smallArm=Y(r),_.chrome.apply(e,p.commonShader),p.mesh.smallArm.draw(e),_.plastic.apply(e,p.commonShader),p.mesh.smallArmCover.draw(e),U(r,r,[25,0,0]),q(r,r,o(t*n.rotation[4])),p.commonShader.uniformMatrix4fv(e,"modelView",!1,r),_.chrome.apply(e,p.commonShader),p.mesh.claw.draw(e),_.plastic.apply(e,p.commonShader),p.mesh.clawCover.draw(e)},on={mat3:M1,mat4:J1,vec3:Cr,vec4:dn,toRadian:o},Un={createFrameBuffer:oe,createVertexBuffer:N,createShaderProgram:Q};export{on as glm,Un as glx,On as initStatus,Fn as initializeGL,Cn as paintGL,Nn as resizeGL,_n as setScreenRenderer};